[INFO][2024-06-14 17:54:28][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-3', 'voice_to_text': 'whisper-1', 'text_to_voice': 'speech-02', 'proxy': '', 'hot_reload': False, 'single_chat_prefix': [''], 'single_chat_reply_prefix': '[bot] ', 'group_chat_prefix': ['@sambot', 'sambot'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2', 'å°èƒ°å®å¼€æºå›¢é˜Ÿ', 'å¤§å”ä¸‰äººè¡Œ', 'å°èƒ°å®ä¸€å®¶äºº', 'èƒ°è…ºäº¤æµå°ç¾¤'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯AIå°åŠ©æ‰‹ï¼Œæ—¨åœ¨æœ‰é€»è¾‘åœ°å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.8, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': 'Link_0gw2yNAVB7KhZEblTCXoFh6GgxuXfmZ9ER53IZr2tJ', 'linkai_app_code': '1Rpf4gh0'}
[INFO][2024-06-14 17:54:28][config.py:210] - [Config] User datas file not found, ignore.
[INFO][2024-06-14 17:54:28][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 17:54:28][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 17:54:28][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 17:54:28][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin GODCMD not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin KEYWORD not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin BANWORDS not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin LINKAI not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin TOOL not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin ROLE not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin DUNGEON not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin BDUNIT not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin HELLO not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin FINISH not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º2913ã€‚
[INFO][2024-06-14 17:54:29][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 17:54:29][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 17:54:29][keyword.py:42] - [keyword] inited.
[WARNING][2024-06-14 17:54:29][banwords.py:54] - [Banwords] init failed, ignore or see https://github.com/zhayujie/chatgpt-on-wechat/tree/master/plugins/banwords .
[WARNING][2024-06-14 17:54:29][plugin_manager.py:150] - Failed to init BANWORDS, diabled. [Errno 2] No such file or directory: '/usr/cow-qywx/chatgpt-on-wechat/plugins/banwords/banwords.txt'
[INFO][2024-06-14 17:54:29][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 17:54:29][tool.py:28] - [tool] inited
[INFO][2024-06-14 17:54:29][role.py:69] - [Role] inited
[INFO][2024-06-14 17:54:29][dungeon.py:56] - [Dungeon] inited
[WARNING][2024-06-14 17:54:29][bdunit.py:42] - [BDunit] init failed, ignore 
[WARNING][2024-06-14 17:54:29][plugin_manager.py:150] - Failed to init BDUNIT, diabled. config.json not found
[INFO][2024-06-14 17:54:29][hello.py:38] - [Hello] inited
[INFO][2024-06-14 17:54:29][finish.py:23] - [Finish] inited
[INFO][2024-06-14 17:54:35][wechatcomapp_channel.py:133] - [wechatcom] receive params: <Storage {'msg_signature': '55055a6f7e2a06553ec844579248dfcf3c39c0d2', 'echostr': 'yeSUb4LWa9miXEgtolfwI5zoUi5CsaIVf7usJh6Dn7zLl+B7GzIFKwCDhPDiE3aqwFixphnXVwpuN3JyYFYAcA==', 'timestamp': '1718358875', 'nonce': '1717984851'}>
[INFO][2024-06-14 17:54:52][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '899c79dd13d66f7c3b50739e85d5a89f220006b5', 'timestamp': '1718358892', 'nonce': '1717897813'}>
[INFO][2024-06-14 17:54:52][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 17:54:52][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[ERROR][2024-06-14 17:55:05][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 17:56:49][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 17:56:49][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 17:56:51][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 17:56:51][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:00:43][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'YOUR API KEY', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'claude_api_key': 'YOUR API KEY', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_prefix': ['', '@xyb'], 'single_chat_reply_prefix': '[bot] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:00:43][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:00:43][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:00:43][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:00:43][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:00:43][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:00:44][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º5374ã€‚
[INFO][2024-06-14 18:00:44][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:00:44][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:00:44][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:00:44][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:00:44][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:00:44][role.py:69] - [Role] inited
[INFO][2024-06-14 18:00:44][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:00:44][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:00:44][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:00:51][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'nonce': '1717608777', 'msg_signature': '9fdc2600c6bd53cb75a8802a440ba9a1c79cb171', 'timestamp': '1718359251'}>
[INFO][2024-06-14 18:00:52][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 18:00:52][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[ERROR][2024-06-14 18:00:52][chat_gpt_bot.py:155] - [CHATGPT] Exception: 'usage'
Traceback (most recent call last):
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/chatgpt/chat_gpt_bot.py", line 127, in reply_text
    "total_tokens": response["usage"]["total_tokens"],
KeyError: 'usage'
[INFO][2024-06-14 18:00:53][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [ERROR]
æˆ‘ç°åœ¨æœ‰ç‚¹ç´¯äº†ï¼Œç­‰ä¼šå†æ¥å§
[INFO][2024-06-14 18:01:18][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'nonce': '1718305671', 'msg_signature': '70caf370148e80bfe923cada1d1a7cd8ba07b06c', 'timestamp': '1718359278'}>
[INFO][2024-06-14 18:01:18][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[ERROR][2024-06-14 18:01:18][chat_gpt_bot.py:155] - [CHATGPT] Exception: 'usage'
Traceback (most recent call last):
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/chatgpt/chat_gpt_bot.py", line 127, in reply_text
    "total_tokens": response["usage"]["total_tokens"],
KeyError: 'usage'
[INFO][2024-06-14 18:01:19][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [ERROR]
æˆ‘ç°åœ¨æœ‰ç‚¹ç´¯äº†ï¼Œç­‰ä¼šå†æ¥å§
[INFO][2024-06-14 18:01:23][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:01:23][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:01:24][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:01:24][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:02:22][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_prefix': ['', '@xyb'], 'single_chat_reply_prefix': '[bot] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:02:22][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:02:22][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:02:22][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:02:22][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:02:22][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º4312ã€‚
[INFO][2024-06-14 18:02:22][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:02:22][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:02:22][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:02:22][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:02:23][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:02:23][role.py:69] - [Role] inited
[INFO][2024-06-14 18:02:23][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:02:23][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:02:23][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:02:30][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'a1a73b85cd1273e9241d09cee615b29f8652c5c6', 'nonce': '1717747225', 'timestamp': '1718359349'}>
[INFO][2024-06-14 18:02:30][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 18:02:30][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[ERROR][2024-06-14 18:02:48][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 18:03:30][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:03:30][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:03:31][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:03:31][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:03:48][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_prefix': ['xyb', '@xyb'], 'single_chat_reply_prefix': '[bot] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:03:48][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:03:48][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:03:48][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:03:48][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:03:48][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º9816ã€‚
[INFO][2024-06-14 18:03:48][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:03:48][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:03:48][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:03:48][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:03:49][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:03:49][role.py:69] - [Role] inited
[INFO][2024-06-14 18:03:49][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:03:49][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:03:49][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:03:53][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'nonce': '1718051748', 'msg_signature': 'a0fabaab7bf2fb4a0621b6fb2369671a9b59ed44', 'timestamp': '1718359433'}>
[INFO][2024-06-14 18:07:33][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:07:33][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:07:34][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:07:34][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:08:54][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:08:54][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:08:54][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:08:54][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:08:54][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:08:54][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:08:55][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º9213ã€‚
[INFO][2024-06-14 18:08:55][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:08:55][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:08:55][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:08:55][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:08:55][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:08:55][role.py:69] - [Role] inited
[INFO][2024-06-14 18:08:55][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:08:55][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:08:55][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:09:01][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'd27194845931942a90ac2f4513ca8b4e730429d9', 'nonce': '1717718448', 'timestamp': '1718359740'}>
[INFO][2024-06-14 18:09:01][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 18:09:01][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[INFO][2024-06-14 18:09:04][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½ä½ å¥½ğŸ‘‹ï¼æˆ‘æ˜¯äººå·¥æ™ºèƒ½åŠ©æ‰‹æ™ºè°±æ¸…è¨€ï¼ˆChatGLMï¼‰ï¼Œå¾ˆé«˜å…´è§åˆ°ä½ ï¼Œæ¬¢è¿é—®æˆ‘ä»»ä½•é—®é¢˜ã€‚
[INFO][2024-06-14 18:12:45][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '8430c4f2c9f7b3883e8b1aff9cea6356fa3e9745', 'nonce': '1718371485', 'timestamp': '1718359965'}>
[INFO][2024-06-14 18:12:45][chat_gpt_bot.py:49] - [CHATGPT] query=å—¯å—¯
[INFO][2024-06-14 18:13:04][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] ä½ å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï½ï¼Œèƒ°è…ºç™Œæ™ºèƒ½æ‚£è€…AIå°åŠ©æ‰‹ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚ç¥æ‚¨å’Œå®¶äººèº«ä½“å¥åº·ï¼ã€é£é™©æç¤ºï¼š[ æœ¬å…¬ç›Šé¡¹ç›®ä½¿ç”¨ AI æŠ€æœ¯æä¾›ä¿¡æ¯ï¼Œå¯èƒ½å­˜åœ¨åå·®ã€‚ä¸€åˆ‡æ²»ç–—å’Œåˆ¤æ–­åº”ä»¥ä¸»æ²»åŒ»ç”Ÿå’Œæ‚£è€…åŠå…¶å®¶å±æ„è§ä¸ºå‡†ã€‚å¦‚æœæ‚¨è®¤ä¸ºä¿¡æ¯åå·®ä¼šå½±å“æ‚¨çš„æ²»ç–—ï¼Œè¯·å‹¿ä½¿ç”¨æœ¬å·¥å…·å’Œå†…å®¹ã€‚æœ¬é¡¹ç›®å·²äº‹å…ˆå‘ŠçŸ¥ï¼Œä¸æ‰¿æ‹…ä»»ä½•ä½¿ç”¨é£é™©ã€‚]ã€‘ã€æ¨èä½¿ç”¨ [å°èƒ°è…ºç½‘é¡µç‰ˆ](https://aibot.samqin.asia) ä»¥è·å¾—å®Œæ•´ä¿¡æ¯]
[INFO][2024-06-14 18:13:18][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '9ece003f8c937d29a18400812c03d2e6503e2956', 'nonce': '1717619160', 'timestamp': '1718359998'}>
[INFO][2024-06-14 18:13:18][chat_gpt_bot.py:49] - [CHATGPT] query=ä»‹ç»ä¸‹ç½—å›½åŸ¹åŒ»ç”Ÿ
[INFO][2024-06-14 18:13:53][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] ç½—å›½åŸ¹åŒ»ç”Ÿæ˜¯ä¸€ä½åœ¨è‚¿ç˜¤è¥å…»é¢†åŸŸå…·æœ‰ä¸°å¯Œç»éªŒçš„ä¸“å®¶ã€‚ä»–åœ¨è‚¿ç˜¤æ‚£è€…çš„è¥å…»æ”¯æŒæ²»ç–—æ–¹é¢æœ‰ç€æ·±å…¥çš„ç ”ç©¶ï¼Œç‰¹åˆ«æ˜¯åœ¨é£Ÿç®¡ç™Œã€èƒƒç™Œç­‰æ¶ˆåŒ–é“è‚¿ç˜¤çš„è¥å…»æ²»ç–—æ–¹é¢ã€‚ç½—å›½åŸ¹åŒ»ç”Ÿå¼ºè°ƒï¼Œè¥å…»æ”¯æŒæ²»ç–—æ˜¯è‚¿ç˜¤æ‚£è€…ç»¼åˆæ²»ç–—çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œèƒ½å¤Ÿæ”¹å–„æ‚£è€…çš„è¥å…»çŠ¶å†µï¼Œæé«˜æ‚£è€…å¯¹æ”¾åŒ–ç–—çš„è€å—åŠ›ã€‚

ç½—å›½åŸ¹åŒ»ç”Ÿè®¤ä¸ºï¼Œè‚¿ç˜¤æ‚£è€…çš„è¥å…»ä¸è‰¯æ˜¯ä¸€ä¸ªå¤æ‚çš„ä¸´åºŠé—®é¢˜ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘æ‚£è€…çš„ç–¾ç—…çŠ¶å†µã€æ²»ç–—æ–¹å¼ä»¥åŠä¸ªä½“å·®å¼‚ã€‚ä»–ä¸»å¼ åœ¨è‚¿ç˜¤æ²»ç–—è¿‡ç¨‹ä¸­ï¼Œåº”æ—©æœŸè¿›è¡Œè¥å…»é£é™©ç­›æŸ¥å’Œè¯„ä¼°ï¼Œå¹¶æ ¹æ®æ‚£è€…çš„å…·ä½“æƒ…å†µåˆ¶å®šä¸ªæ€§åŒ–çš„è¥å…»æ²»ç–—æ–¹æ¡ˆã€‚

æ­¤å¤–ï¼Œç½—å›½åŸ¹åŒ»ç”Ÿè¿˜å¼ºè°ƒï¼Œè¥å…»æ²»ç–—ä¸ä»…ä»…æ˜¯æä¾›è¥å…»æ”¯æŒï¼Œè¿˜åŒ…æ‹¬å¯¹æ‚£è€…è¿›è¡Œè¥å…»æ•™è‚²ï¼Œå¸®åŠ©ä»–ä»¬å»ºç«‹å¥åº·çš„é¥®é£Ÿä¹ æƒ¯ï¼Œæé«˜ç”Ÿæ´»è´¨é‡ã€‚

æ€»çš„æ¥è¯´ï¼Œç½—å›½åŸ¹åŒ»ç”Ÿåœ¨è‚¿ç˜¤è¥å…»é¢†åŸŸçš„ç ”ç©¶å’Œå®è·µï¼Œä¸ºè‚¿ç˜¤æ‚£è€…çš„è¥å…»æ²»ç–—æä¾›äº†é‡è¦çš„æŒ‡å¯¼å’Œæ”¯æŒã€‚

ã€é£é™©æç¤ºï¼š[ æœ¬å…¬ç›Šé¡¹ç›®ä½¿ç”¨ AI æŠ€æœ¯æä¾›ä¿¡æ¯ï¼Œå¯èƒ½å­˜åœ¨åå·®ã€‚ä¸€åˆ‡æ²»ç–—å’Œåˆ¤æ–­åº”ä»¥ä¸»æ²»åŒ»ç”Ÿå’Œæ‚£è€…åŠå…¶å®¶å±æ„è§ä¸ºå‡†ã€‚å¦‚æœæ‚¨è®¤ä¸ºä¿¡æ¯åå·®ä¼šå½±å“æ‚¨çš„æ²»ç–—ï¼Œè¯·å‹¿ä½¿ç”¨æœ¬å·¥å…·å’Œå†…å®¹ã€‚æœ¬é¡¹ç›®å·²äº‹å…ˆå‘ŠçŸ¥ï¼Œä¸æ‰¿æ‹…ä»»ä½•ä½¿ç”¨é£é™©ã€‚]ã€‘ã€æ¨èä½¿ç”¨ [å°èƒ°è…ºç½‘é¡µç‰ˆ](https://aibot.samqin.asia) ä»¥è·å¾—å®Œæ•´ä¿¡æ¯ã€‘
[INFO][2024-06-14 18:14:16][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'baaba77fe0d86c4d1b4db56f68ead6991c629a3a', 'nonce': '1717620778', 'timestamp': '1718360056'}>
[INFO][2024-06-14 18:14:16][chat_gpt_bot.py:49] - [CHATGPT] query=æœç´¢ä¸‹ç½—å›½åŸ¹åŒ»ç”Ÿ
[ERROR][2024-06-14 18:14:42][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 18:14:56][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '8d49527fa86c07b8945ab568f5ecd36fdaa19465', 'nonce': '1717573559', 'timestamp': '1718360096'}>
[INFO][2024-06-14 18:14:56][chat_gpt_bot.py:49] - [CHATGPT] query=æœç´¢ä¸‹ç½—å›½åŸ¹åŒ»ç”Ÿ
[WARNING][2024-06-14 18:14:56][session_manager.py:72] - Exception when counting tokens precisely for prompt: expected string or buffer
[INFO][2024-06-14 18:15:15][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½ç½—å›½åŸ¹åŒ»ç”Ÿæ˜¯å¤æ—¦å¤§å­¦é™„å±è‚¿ç˜¤åŒ»é™¢èƒ°è…ºå¤–ç§‘çš„å‰¯ä¸»ä»»åŒ»å¸ˆã€‚ä»–äº2010å¹´ä»å¤æ—¦å¤§å­¦æ¯•ä¸šï¼Œè·å¾—å¤–ç§‘å­¦åšå£«å­¦ä½ï¼Œå¹¶å¸ˆä»æˆ‘å›½è‘—åçš„èƒ°è…ºå¤–ç§‘ä¸“å®¶å€ªæ³‰å…´æ•™æˆã€‚ç½—å›½åŸ¹åŒ»ç”Ÿæ›¾äº2008å¹´å›½å®¶å…¬æ´¾è‡³ç¾å›½åŠ å·å¤§å­¦å°”æ¹¾åˆ†æ ¡è”åˆåŸ¹å…»ã€‚ç›®å‰ï¼Œä»–åœ¨å¤æ—¦å¤§å­¦é™„å±è‚¿ç˜¤åŒ»é™¢èƒ°è…ºå¤–ç§‘å·¥ä½œï¼Œä¸»è¦è‡´åŠ›äºèƒ°è…ºè‚èƒ†è‚¿ç˜¤çš„ä¸´åºŠè¯Šæ²»å·¥ä½œï¼Œæ¯å¹´å®Œæˆèƒ°è…ºè‚èƒ†æ‰‹æœ¯200ä½™å°ã€‚

åœ¨ä¸´åºŠæ²»ç–—æ–¹é¢ï¼Œç½—å›½åŸ¹åŒ»ç”Ÿæ“…é•¿èƒ°è…ºç™Œã€èƒ°è…ºç¥ç»å†…åˆ†æ³Œè‚¿ç˜¤ã€èƒ†å›Šç™Œç­‰ç–¾ç—…çš„æ²»ç–—ï¼ŒåŒ…æ‹¬åŒ–ç–—ã€æ”¾ç–—ã€é¶å‘æ²»ç–—ã€ç»†èƒæ²»ç–—å’Œå…ç–«æ²»ç–—ã€‚ä»–è¿˜æ“…é•¿å¤„ç†å¦‚èƒ°å²›ç»†èƒç˜¤ã€èƒƒæ³Œç´ ç˜¤ã€èƒ°è…ºå¯¼ç®¡å†…ä¹³å¤´çŠ¶ç²˜æ¶²ç˜¤å˜ï¼ˆIPMNï¼‰ã€å®æ€§å‡ä¹³å¤´çŠ¶è‚¿ç˜¤ï¼ˆSPTï¼‰ã€ç²˜æ¶²æ€§å›Šè…ºç˜¤ã€æµ†æ¶²æ€§å›Šè…ºç˜¤å’Œèƒ°è…ºå›Šè‚¿ç­‰ç–¾ç—…ã€‚

ç½—å›½åŸ¹åŒ»ç”Ÿåœ¨ç§‘ç ”æ–¹é¢ä¹Ÿæœ‰æ˜¾è‘—æˆå°±ï¼Œä»–å…ˆåä½œä¸ºé¡¹ç›®è´Ÿè´£äººæ‰¿æ‹…äº†å¤šä¸ªé¡¹ç›®ï¼Œå¦‚å›½å®¶è‡ªç„¶ç§‘å­¦åŸºé‡‘ã€ä¸Šæµ·å¸‚ç§‘å§”å¯æ˜æ˜Ÿè®¡åˆ’ã€ä¸Šæµ·å¸‚è‡ªç„¶ç§‘å­¦åŸºé‡‘ç­‰ï¼Œå¹¶å‘è¡¨äº†50ä½™ç¯‡SCIè®ºæ–‡ï¼ŒåŒ…æ‹¬åœ¨Journal of Clinical Oncologyã€Annals of Surgeryç­‰å›½é™…æƒå¨æœŸåˆŠä¸Šå‘è¡¨çš„æ–‡ç« ã€‚æ­¤å¤–ï¼Œä»–è¿˜è·å¾—äº†2é¡¹ä¸“åˆ©ã€‚

å…³äºç½—å›½åŸ¹åŒ»ç”Ÿçš„æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥å‚è€ƒå¤æ—¦å¤§å­¦é™„å±è‚¿ç˜¤åŒ»é™¢çš„å®˜æ–¹ç½‘ç«™æˆ–ç›¸å…³å¥åº·ä¿¡æ¯å¹³å°ã€‚

æœç´¢ç»“æœæ¥è‡ªï¼š
ç½—å›½åŸ¹åŒ»ç”Ÿç®€ä»‹-å¤æ—¦å¤§å­¦é™„å±è‚¿ç˜¤åŒ»é™¢èƒ°è…ºå¤–ç§‘-ç™¾åº¦å¥åº· - https://health.baidu.com/doctordec/jianjie/d0ss8cb3qog4t322or8g
ç½—å›½åŸ¹_å¤æ—¦å¤§å­¦é™„å±è‚¿ç˜¤åŒ»é™¢èƒ°è…ºå¤–ç§‘_ç½—å›½åŸ¹æŒ‚å· - æœ‰æ¥åŒ»ç”Ÿ - https://m.youlai.cn/yyk/docindex/35593/
ã€ç½—å›½åŸ¹ã€‘å¤æ—¦å¤§å­¦é™„å±è‚¿ç˜¤åŒ»é™¢-èƒ°è…ºå¤–ç§‘-å›¾æ–‡å’¨è¯¢-ç”µè¯å’¨è¯¢-é¢„çº¦æŒ‚å·-ç™¾åº¦å¥åº· - https://health.baidu.com/doctordec/dochome/88939
[INFO][2024-06-14 18:15:36][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:15:36][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:15:37][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:15:37][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:16:26][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:16:26][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:16:27][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:16:27][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:16:27][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:16:27][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:16:28][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º8465ã€‚
[INFO][2024-06-14 18:16:28][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:16:28][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:16:28][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:16:28][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:16:29][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:16:29][role.py:69] - [Role] inited
[INFO][2024-06-14 18:16:29][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:16:29][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:16:29][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:16:54][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:16:54][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:16:54][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:16:54][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:16:54][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:16:54][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º2654ã€‚
[INFO][2024-06-14 18:16:54][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:16:54][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:16:54][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:16:54][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:16:55][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:16:55][role.py:69] - [Role] inited
[INFO][2024-06-14 18:16:55][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:16:55][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:16:55][finish.py:23] - [Finish] inited
[ERROR][2024-06-14 18:16:55][app.py:66] - App startup failed!
[ERROR][2024-06-14 18:16:55][app.py:67] - No socket could be created -- (('0.0.0.0', 9898): [Errno 98] Address already in use)
Traceback (most recent call last):
  File "app.py", line 61, in run
    start_channel(channel_name)
  File "app.py", line 40, in start_channel
    channel.startup()
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/wechatcom/wechatcomapp_channel.py", line 50, in startup
    web.httpserver.runsimple(app.wsgifunc(), ("0.0.0.0", port))
  File "/usr/local/python3/lib/python3.8/site-packages/web/httpserver.py", line 176, in runsimple
    server.start()
  File "/usr/local/python3/lib/python3.8/site-packages/cheroot/server.py", line 1844, in start
    self.prepare()
  File "/usr/local/python3/lib/python3.8/site-packages/cheroot/server.py", line 1799, in prepare
    raise socket.error(msg)
OSError: No socket could be created -- (('0.0.0.0', 9898): [Errno 98] Address already in use)
[INFO][2024-06-14 18:17:21][app.py:19] - signal 15 received, exiting...
[INFO][2024-06-14 18:17:21][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:17:23][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:17:23][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:17:24][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:17:24][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:17:24][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:17:24][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º2045ã€‚
[INFO][2024-06-14 18:17:24][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:17:24][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:17:24][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:17:24][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:17:25][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:17:25][role.py:69] - [Role] inited
[INFO][2024-06-14 18:17:25][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:17:25][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:17:25][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:17:52][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718360272', 'msg_signature': '34112948c64db5c0f047b32256830b75892ec544', 'nonce': '1718086935'}>
[INFO][2024-06-14 18:17:52][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 18:17:52][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[INFO][2024-06-14 18:17:55][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½ä½ å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï½
[INFO][2024-06-14 18:18:12][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718360292', 'msg_signature': '41f2d5028b7ccec6c35b9bc0b50e4af7508657c8', 'nonce': '1717936354'}>
[INFO][2024-06-14 18:18:12][chat_gpt_bot.py:49] - [CHATGPT] query=æˆ‘æœ‰ç‚¹ç´¯ å¼€ä¸ªæ”¾æ¾çš„é’¢ç´æ›²
[INFO][2024-06-14 18:18:21][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½å¾ˆæŠ±æ­‰ï¼Œæˆ‘ç›®å‰æ— æ³•ç›´æ¥æ’­æ”¾éŸ³ä¹ã€‚ä¸è¿‡ï¼Œæˆ‘å¯ä»¥æ¨èä¸€äº›æ”¾æ¾çš„é’¢ç´æ›²ç»™æ‚¨ã€‚æ‚¨å¯ä»¥åœ¨éŸ³ä¹å¹³å°æˆ–è§†é¢‘ç½‘ç«™ä¸Šæœç´¢è¿™äº›æ›²å­æ¥è†å¬ï¼š

1. **Ludovico Einaudi** - "Nuvole Bianche"
2. **Yiruma** - "River Flows in You"
3. **Brian Crain** - "Butterfly Waltz"
4. **Claude Debussy** - "Clair de Lune"
5. **Erik Satie** - "GymnopÃ©die No.1"

å¸Œæœ›è¿™äº›å»ºè®®èƒ½å¸®åŠ©æ‚¨æ”¾æ¾ã€‚
[INFO][2024-06-14 18:19:33][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718360373', 'msg_signature': '10632845ca60577c3d3353dc82399ce85d324f5d', 'nonce': '1717983531'}>
[INFO][2024-06-14 18:19:33][chat_gpt_bot.py:49] - [CHATGPT] query=ä½ æ˜¯è°
[INFO][2024-06-14 18:19:42][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] ä½ å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï½
[INFO][2024-06-14 18:22:22][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718360542', 'msg_signature': '9f4ba1e2402ee41f6ee3f4c69a1700ae3713adf0', 'nonce': '1718108647'}>
[INFO][2024-06-14 18:22:22][chat_gpt_bot.py:49] - [CHATGPT] query=ä¸Šæµ·ä»Šå¤©å¤©æ°”
[INFO][2024-06-14 18:22:30][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½ä¸Šæµ·ä»Šå¤©çš„å¤©æ°”æ˜¯é˜´å¤©ï¼Œæ°”æ¸©èŒƒå›´åœ¨31â„ƒåˆ°23â„ƒä¹‹é—´ï¼Œé£åŠ›å°äº3çº§ã€‚

æœç´¢ç»“æœæ¥è‡ªï¼š
ä¸Šæµ·å¤©æ°”é¢„æŠ¥,ä¸Šæµ·7å¤©å¤©æ°”é¢„æŠ¥,ä¸Šæµ·15å¤©å¤©æ°”é¢„æŠ¥,ä¸Šæµ·å¤©æ°”æŸ¥è¯¢ - http://weather.com.cn/weather/101020100.shtml
[INFO][2024-06-14 18:52:36][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718362356', 'msg_signature': '0abbc3889c5af157bf65ff19687c2191491a45e5', 'nonce': '1718272645'}>
[INFO][2024-06-14 18:52:36][chat_gpt_bot.py:49] - [CHATGPT] query=æœç´¢ä¸‹åº„è¡¨ä¼Ÿ
[ERROR][2024-06-14 18:52:44][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 18:53:55][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718362435', 'msg_signature': '1666231bb690e564ee2841658d243b4768de7b78', 'nonce': '1718614679'}>
[INFO][2024-06-14 18:53:55][chat_gpt_bot.py:49] - [CHATGPT] query=æœç´¢ä¸‹åº„è¡¨ä¼Ÿ
[WARNING][2024-06-14 18:53:55][session_manager.py:72] - Exception when counting tokens precisely for prompt: expected string or buffer
[WARNING][2024-06-14 18:54:00][chat_gpt_bot.py:145] - [CHATGPT] Bad Gateway: Invalid response object from API: '{"code":500,"statusText":"","message":"Cannot read properties of undefined (reading \'value\')","data":null}' (HTTP response code was 500)
[WARNING][2024-06-14 18:54:10][chat_gpt_bot.py:160] - [CHATGPT] ç¬¬1æ¬¡é‡è¯•
[INFO][2024-06-14 18:54:26][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½åº„è¡¨ä¼Ÿæ˜¯ä¸€ä½èµ„æ·±çš„å¼€æºæ¨å¹¿è€…å’Œç ”ç©¶è€…ã€‚ä»–åœ¨1997å¹´æ¯•ä¸šåï¼Œä¸€ç›´æ´»è·ƒåœ¨ç¼–ç¨‹é¢†åŸŸï¼Œå¹¶äº2009å¹´åŠ å…¥ç››å¤§åˆ›æ–°é™¢ã€‚ä»–çƒ­è¡·äºå¼€æºç¤¾åŒºçš„æ´»åŠ¨ï¼Œå¹¶ç§¯æå‚ä¸å„ç§äº¤æµã€‚åº„è¡¨ä¼Ÿè´¡çŒ®äº†å¾ˆå¤šåœ¨å¼€æºé¢†åŸŸçš„å·¥ä½œï¼ŒåŒ…æ‹¬ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„å†™ä½œè®¡åˆ’ã€Šå€ŸåŠ©å¼€æºé¡¹ç›®ï¼Œå­¦ä¹ è½¯ä»¶å¼€å‘ã€‹ã€‚

åº„è¡¨ä¼Ÿæ›¾å‘èµ·äº†â€œæˆ‘ä»¬çš„å¼€æºé¡¹ç›®â€æ´»åŠ¨ï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªåˆ†äº«å’Œè®¨è®ºè‡ªå·±å¼€æºé¡¹ç›®çš„å¹³å°ã€‚è¿™ä¸ªæ´»åŠ¨å¾—åˆ°äº†å¹¿æ³›çš„å“åº”ï¼Œå¸å¼•äº†ä¼—å¤šå¼€å‘è€…çš„å‚ä¸ï¼Œå¹¶æˆåŠŸä¸¾åŠäº†å¤šåœºæ´»åŠ¨ã€‚ä»–é€šè¿‡è¿™äº›æ´»åŠ¨ï¼Œä¿ƒè¿›äº†å¼€å‘è€…ä¹‹é—´çš„äº¤æµå’Œåˆä½œã€‚

æ­¤å¤–ï¼Œåº„è¡¨ä¼Ÿåœ¨å¼€æºç¤¾ä¸­æ‹…ä»»é‡è¦è§’è‰²ï¼Œä»–å¯¹å¼€æºé¡¹ç›®çš„ç®¡ç†å’Œæ¨åŠ¨æœ‰ç€æ·±åˆ»çš„è§è§£ã€‚ä»–å¼ºè°ƒï¼Œå¼€æºé¡¹ç›®åº”è¯¥æ³¨é‡é•¿æœŸå¯æŒç»­æ€§ï¼Œè€Œä¸æ˜¯ä»…ä»…è¿½æ±‚çŸ­æœŸçš„æˆæœã€‚åº„è¡¨ä¼Ÿè®¤ä¸ºï¼Œä¸€ä¸ªå¥½çš„å¼€æºç”Ÿæ€åº”è¯¥åŒ…æ‹¬çƒ­æƒ…çš„å¼€æºå¼€å‘è€…ã€èƒ½å¤ŸåŸ¹è‚²ä¼˜ç§€å¼€å‘è€…å’Œé¡¹ç›®çš„æ•™è‚²æœºæ„ã€èµ„åŠ©å¼€æºé¡¹ç›®çš„åŸºé‡‘ä¼šï¼Œä»¥åŠæ„¿æ„æ”¯æŒå¼€æºçš„ä¼ä¸šã€‚

åº„è¡¨ä¼Ÿå¯¹äºå¼€æºç¤¾åŒºå’Œé¡¹ç›®çš„è¿è¥æœ‰ç€ä¸°å¯Œçš„ç»éªŒå’Œæ·±å…¥çš„æ€è€ƒï¼Œä»–çš„å·¥ä½œå’Œè§‚ç‚¹å¯¹äºæ¨åŠ¨å¼€æºæ–‡åŒ–å’Œé¡¹ç›®çš„å‘å±•å…·æœ‰é‡è¦æ„ä¹‰ã€‚

æœç´¢ç»“æœæ¥è‡ªï¼š
â€œæˆ‘ä»¬çš„å¼€æºé¡¹ç›®â€æ´»åŠ¨å‘èµ·äººâ€”â€”åº„è¡¨ä¼Ÿä¸“è®¿-äº‘ç¤¾åŒº-åä¸ºäº‘ - https://bbs.huaweicloud.com/blogs/104682
å¼€æºç¤¾åº„è¡¨ä¼Ÿï¼šå¼€æºè¦å‡ºåœˆäº†ï¼Œæ¨å‘æ–‡åŒ–ã€æ²‰æµ¸å¼å…»é±¼å¡˜ï¼Œç¤¾åŒºå»ºè®¾å¿ƒæ³•äº†è§£ä¸€ä¸‹ I OpenTEKr å¤§è¯å¼€æº Vol.5_å¤§è¯å¼€æº_OpenTEKr_InfoQå†™ä½œç¤¾åŒº - https://xie.infoq.cn/article/6bdcda08b3ed4be1097335500
å¼€æºç¤¾ç†äº‹åº„è¡¨ä¼Ÿï¼šKPIæ‹‰ä¸åŠ¨å¼€æºï¼Œæ˜¯å·¥å…·ç”Ÿäº†é”ˆè¿˜æ˜¯å¦æœ‰è®²ç©¶ï¼Ÿ - https://baijiahao.baidu.com/s?id=1762481528272673779
[INFO][2024-06-14 19:30:00][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 19:30:00][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 19:30:01][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 19:30:01][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 19:30:01][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 19:30:01][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 19:30:02][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º0369ã€‚
[INFO][2024-06-14 19:30:02][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 19:30:02][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 19:30:02][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 19:30:02][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 19:30:03][tool.py:28] - [tool] inited
[INFO][2024-06-14 19:30:03][role.py:69] - [Role] inited
[INFO][2024-06-14 19:30:03][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 19:30:03][hello.py:38] - [Hello] inited
[INFO][2024-06-14 19:30:03][finish.py:23] - [Finish] inited
[ERROR][2024-06-14 19:30:03][app.py:66] - App startup failed!
[ERROR][2024-06-14 19:30:03][app.py:67] - No socket could be created -- (('0.0.0.0', 9898): [Errno 98] Address already in use)
Traceback (most recent call last):
  File "app.py", line 61, in run
    start_channel(channel_name)
  File "app.py", line 40, in start_channel
    channel.startup()
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/wechatcom/wechatcomapp_channel.py", line 50, in startup
    web.httpserver.runsimple(app.wsgifunc(), ("0.0.0.0", port))
  File "/usr/local/python3/lib/python3.8/site-packages/web/httpserver.py", line 176, in runsimple
    server.start()
  File "/usr/local/python3/lib/python3.8/site-packages/cheroot/server.py", line 1844, in start
    self.prepare()
  File "/usr/local/python3/lib/python3.8/site-packages/cheroot/server.py", line 1799, in prepare
    raise socket.error(msg)
OSError: No socket could be created -- (('0.0.0.0', 9898): [Errno 98] Address already in use)
[INFO][2024-06-14 19:31:01][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 19:31:01][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 19:31:02][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 19:31:02][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 19:31:02][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 19:31:02][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º1947ã€‚
[INFO][2024-06-14 19:31:02][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 19:31:02][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 19:31:02][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 19:31:02][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 19:31:04][tool.py:28] - [tool] inited
[INFO][2024-06-14 19:31:04][role.py:69] - [Role] inited
[INFO][2024-06-14 19:31:04][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 19:31:04][hello.py:38] - [Hello] inited
[INFO][2024-06-14 19:31:04][finish.py:23] - [Finish] inited
[INFO][2024-06-14 19:31:19][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'aedb9c8f838aa4ec6d2595c8acb4df8112541403', 'nonce': '1717956572', 'timestamp': '1718364679'}>
[INFO][2024-06-14 19:31:19][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 19:31:19][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[WARNING][2024-06-14 19:31:19][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 19:31:21][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 19:31:22][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½ä½ å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï½
[INFO][2024-06-14 19:35:25][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'c6732cf65f13c65b0645fa92e4a4c0b268465655', 'nonce': '1718235218', 'timestamp': '1718364925'}>
[INFO][2024-06-14 19:35:25][chat_gpt_bot.py:49] - [CHATGPT] query=ä»Šå¤©åŒ—äº¬å¤©æ°”
[WARNING][2024-06-14 19:35:25][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 19:35:34][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 19:35:34][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½ä»Šå¤©åŒ—äº¬çš„å¤©æ°”é¢„æŠ¥æ˜¾ç¤ºï¼Œå¤©æ°”çŠ¶å†µä¸ºå¤šäº‘è½¬å°é›¨ï¼Œæ°”æ¸©èŒƒå›´åœ¨37â„ƒåˆ°23â„ƒä¹‹é—´ï¼Œé£åŠ›å°äº3çº§ã€‚è¯·æ³¨æ„ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½ä¼šæ ¹æ®å®æ—¶æ°”è±¡æ¡ä»¶å‘ç”Ÿå˜åŒ–ã€‚

æœç´¢ç»“æœæ¥è‡ªï¼š
åŒ—äº¬å¤©æ°”é¢„æŠ¥,åŒ—äº¬7å¤©å¤©æ°”é¢„æŠ¥,åŒ—äº¬15å¤©å¤©æ°”é¢„æŠ¥,åŒ—äº¬å¤©æ°”æŸ¥è¯¢ - http://weather.com.cn/weather/101010100.shtml
[INFO][2024-06-14 19:44:36][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'e3527c9bd2a1b909c1ee5f1381f8e9158bb55de6', 'nonce': '1718502237', 'timestamp': '1718365476'}>
[INFO][2024-06-14 19:44:36][chat_gpt_bot.py:49] - [CHATGPT] query=æœç´¢ä¸‹åº„è¡¨ä¼Ÿ
[WARNING][2024-06-14 19:44:36][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 19:44:47][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[ERROR][2024-06-14 19:44:47][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 19:45:05][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '84071d27eab7f9ae788bad9e9a6729861fcaaf53', 'nonce': '1718119294', 'timestamp': '1718365505'}>
[INFO][2024-06-14 19:45:05][chat_gpt_bot.py:49] - [CHATGPT] query=æœç´¢ä¸‹åº„è¡¨ä¼Ÿ
[WARNING][2024-06-14 19:45:05][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 19:45:11][chat_gpt_bot.py:145] - [CHATGPT] Bad Gateway: Invalid response object from API: '{"code":500,"statusText":"","message":"Cannot read properties of undefined (reading \'value\')","data":null}' (HTTP response code was 500)
[WARNING][2024-06-14 19:45:21][chat_gpt_bot.py:160] - [CHATGPT] ç¬¬1æ¬¡é‡è¯•
[WARNING][2024-06-14 19:45:48][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[ERROR][2024-06-14 19:45:48][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 19:56:32][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 19:56:32][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 19:56:33][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 19:56:33][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 19:59:22][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 19:59:22][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 19:59:22][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 19:59:22][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 19:59:22][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 19:59:22][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 19:59:23][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º4867ã€‚
[INFO][2024-06-14 19:59:23][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 19:59:23][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 19:59:23][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 19:59:23][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 19:59:24][tool.py:28] - [tool] inited
[INFO][2024-06-14 19:59:24][role.py:69] - [Role] inited
[INFO][2024-06-14 19:59:24][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 19:59:24][hello.py:38] - [Hello] inited
[INFO][2024-06-14 19:59:24][finish.py:23] - [Finish] inited
[INFO][2024-06-14 19:59:31][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'b4c2cc51fadce674390a6eed2b8b30c9cedb261c', 'timestamp': '1718366371', 'nonce': '1717892845'}>
[INFO][2024-06-14 19:59:31][bridge.py:61] - create bot chatGPT for chat
[ERROR][2024-06-14 19:59:31][chat_channel.py:303] - Worker return exception: inconsistent use of tabs and spaces in indentation (chat_gpt_bot.py, line 80)
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 170, in _handle
    reply = self._generate_reply(context)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 182, in _generate_reply
    e_context = PluginManager().emit_event(
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/plugin_manager.py", line 191, in emit_event
    instance.handlers[e_context.event](e_context, *args, **kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/role/role.py", line 104, in on_handle_context
    bot = Bridge().get_bot("chat")
  File "/usr/cow-qywx/chatgpt-on-wechat/bridge/bridge.py", line 67, in get_bot
    self.bots[typename] = create_bot(self.btype[typename])
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/bot_factory.py", line 23, in create_bot
    from bot.chatgpt.chat_gpt_bot import ChatGPTBot
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/chatgpt/chat_gpt_bot.py", line 80
    if isinstance(reply_content["content"], list):
                                                 ^
TabError: inconsistent use of tabs and spaces in indentation
[INFO][2024-06-14 20:00:07][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:00:07][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:00:10][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:00:10][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:04:45][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:04:45][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:04:45][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:04:45][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:04:45][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:04:45][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:04:46][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º2680ã€‚
[INFO][2024-06-14 20:04:46][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:04:46][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:04:46][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:04:46][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:04:47][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:04:47][role.py:69] - [Role] inited
[INFO][2024-06-14 20:04:47][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:04:47][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:04:47][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:04:53][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'nonce': '1718260171', 'msg_signature': 'ab3136ea7e809e185a73d554c1a855c6a3b0956d', 'timestamp': '1718366693'}>
[INFO][2024-06-14 20:04:53][bridge.py:61] - create bot chatGPT for chat
[ERROR][2024-06-14 20:04:53][chat_channel.py:303] - Worker return exception: unindent does not match any outer indentation level (chat_gpt_bot.py, line 74)
NoneType: None
[INFO][2024-06-14 20:06:37][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:06:37][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:06:43][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:06:43][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:11:16][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:11:16][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:11:16][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:11:16][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:11:16][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:11:16][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:11:17][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º0683ã€‚
[INFO][2024-06-14 20:11:17][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:11:17][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:11:17][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:11:17][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:11:17][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:11:17][role.py:69] - [Role] inited
[INFO][2024-06-14 20:11:17][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:11:17][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:11:17][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:11:24][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718367084', 'msg_signature': '641a5d3734bd49dfd7da483767775aa67b45fbe4', 'nonce': '1718369953'}>
[INFO][2024-06-14 20:11:24][bridge.py:61] - create bot chatGPT for chat
[ERROR][2024-06-14 20:11:24][chat_channel.py:303] - Worker return exception: inconsistent use of tabs and spaces in indentation (chat_gpt_bot.py, line 79)
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 170, in _handle
    reply = self._generate_reply(context)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 182, in _generate_reply
    e_context = PluginManager().emit_event(
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/plugin_manager.py", line 191, in emit_event
    instance.handlers[e_context.event](e_context, *args, **kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/role/role.py", line 104, in on_handle_context
    bot = Bridge().get_bot("chat")
  File "/usr/cow-qywx/chatgpt-on-wechat/bridge/bridge.py", line 67, in get_bot
    self.bots[typename] = create_bot(self.btype[typename])
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/bot_factory.py", line 23, in create_bot
    from bot.chatgpt.chat_gpt_bot import ChatGPTBot
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/chatgpt/chat_gpt_bot.py", line 79
    if isinstance(reply_content["content"], list):
                                                 ^
TabError: inconsistent use of tabs and spaces in indentation
[INFO][2024-06-14 20:12:25][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:12:25][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:12:26][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:12:26][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:13:21][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:13:21][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:13:21][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:13:21][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:13:21][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:13:21][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º1674ã€‚
[INFO][2024-06-14 20:13:21][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:13:21][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:13:21][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:13:21][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:13:22][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:13:22][role.py:69] - [Role] inited
[INFO][2024-06-14 20:13:22][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:13:22][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:13:22][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:13:26][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'f5d7217ade3e88b978f6fad77cf194bf3e86de9a', 'nonce': '1718306092', 'timestamp': '1718367206'}>
[INFO][2024-06-14 20:13:26][bridge.py:61] - create bot chatGPT for chat
[ERROR][2024-06-14 20:13:26][chat_channel.py:303] - Worker return exception: inconsistent use of tabs and spaces in indentation (chat_gpt_bot.py, line 79)
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 170, in _handle
    reply = self._generate_reply(context)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 182, in _generate_reply
    e_context = PluginManager().emit_event(
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/plugin_manager.py", line 191, in emit_event
    instance.handlers[e_context.event](e_context, *args, **kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/role/role.py", line 104, in on_handle_context
    bot = Bridge().get_bot("chat")
  File "/usr/cow-qywx/chatgpt-on-wechat/bridge/bridge.py", line 67, in get_bot
    self.bots[typename] = create_bot(self.btype[typename])
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/bot_factory.py", line 23, in create_bot
    from bot.chatgpt.chat_gpt_bot import ChatGPTBot
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/chatgpt/chat_gpt_bot.py", line 79
    if isinstance(reply_content["content"], list):
                                                 ^
TabError: inconsistent use of tabs and spaces in indentation
[INFO][2024-06-14 20:13:40][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:13:40][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:13:49][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:13:49][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:14:50][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:14:50][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:14:51][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:14:51][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:14:51][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:14:51][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º5789ã€‚
[INFO][2024-06-14 20:14:51][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:14:51][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:14:51][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:14:51][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:14:52][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:14:52][role.py:69] - [Role] inited
[INFO][2024-06-14 20:14:52][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:14:52][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:14:52][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:14:58][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '70bed2deb16624eb4bd696d5480c050fc264e121', 'timestamp': '1718367297', 'nonce': '1717769643'}>
[INFO][2024-06-14 20:14:58][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 20:14:58][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[WARNING][2024-06-14 20:14:58][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:14:59][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:15:00][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½ä½ å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï½
[INFO][2024-06-14 20:15:19][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'c969591d2ce06a479aa3a643442579fae3a65fa4', 'timestamp': '1718367319', 'nonce': '1718220214'}>
[INFO][2024-06-14 20:15:19][chat_gpt_bot.py:49] - [CHATGPT] query=ä»Šå¤©å¹¿å·å¤©æ°”
[WARNING][2024-06-14 20:15:19][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:15:36][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[ERROR][2024-06-14 20:15:36][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 20:16:56][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'aeb6646b9251e3dbd2e3bbdbe18929e3666f5c8d', 'timestamp': '1718367416', 'nonce': '1718551955'}>
[INFO][2024-06-14 20:16:56][chat_gpt_bot.py:49] - [CHATGPT] query=å¹¿å·ä»Šå¤©å¤©æ°”
[WARNING][2024-06-14 20:16:56][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:17:04][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:17:04][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½ä»Šå¤©å¹¿å·çš„å¤©æ°”é¢„æŠ¥æ˜¾ç¤ºï¼Œå¤©æ°”çŠ¶å†µä¸ºå¤§é›¨è½¬å¤§åˆ°æš´é›¨ï¼Œæ°”æ¸©èŒƒå›´åœ¨33â„ƒåˆ°26â„ƒä¹‹é—´ï¼Œé£åŠ›ä¸º3-4çº§ã€‚

æœç´¢ç»“æœæ¥è‡ªï¼š
å¹¿å·å¤©æ°”é¢„æŠ¥,å¹¿å·7å¤©å¤©æ°”é¢„æŠ¥,å¹¿å·15å¤©å¤©æ°”é¢„æŠ¥,å¹¿å·å¤©æ°”æŸ¥è¯¢ - http://weather.com.cn/weather/101280101.shtml
[INFO][2024-06-14 20:30:13][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:30:13][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:30:14][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:30:14][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:31:32][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:31:32][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:31:32][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:31:32][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:31:32][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:31:32][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:31:33][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º2586ã€‚
[INFO][2024-06-14 20:31:33][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:31:33][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:31:33][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:31:33][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:31:33][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:31:33][role.py:69] - [Role] inited
[INFO][2024-06-14 20:31:33][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:31:33][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:31:33][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:31:50][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '071377a20fd2190bd5c931773a1f4f68991d23be', 'timestamp': '1718368310', 'nonce': '1717925775'}>
[INFO][2024-06-14 20:31:50][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 20:31:50][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[WARNING][2024-06-14 20:31:50][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:31:51][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:31:52][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½ä½ å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï½
[INFO][2024-06-14 20:32:08][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'f8fa419d5be796c6d8af9a8c2b542e4b222cb340', 'timestamp': '1718368328', 'nonce': '1718421876'}>
[INFO][2024-06-14 20:32:08][chat_gpt_bot.py:49] - [CHATGPT] query=é•¿æ²™ä»Šå¤©å¤©æ°”
[WARNING][2024-06-14 20:32:08][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:32:18][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:32:18][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½é•¿æ²™ä»Šå¤©çš„å¤©æ°”é¢„æŠ¥æ˜¾ç¤ºï¼Œç™½å¤©æœ‰å°é›¨ï¼Œæ°”æ¸©å¤§çº¦åœ¨25æ‘„æ°åº¦ã€‚ç”±äºæœ‰é™æ°´ï¼Œå»ºè®®è¿›è¡Œå®¤å†…ä¼‘é—²è¿åŠ¨ï¼ŒåŒæ—¶ï¼Œç”±äºé›¨æ°´å’Œæ³¥æ°´å¯èƒ½ä¼šå¼„è„è½¦è¾†ï¼Œä»Šå¤©ä¸é€‚å®œæ´—è½¦ã€‚

æœç´¢ç»“æœæ¥è‡ªï¼š
é•¿æ²™å¤©æ°”é¢„æŠ¥,é•¿æ²™7å¤©å¤©æ°”é¢„æŠ¥,é•¿æ²™15å¤©å¤©æ°”é¢„æŠ¥,é•¿æ²™å¤©æ°”æŸ¥è¯¢ - http://weather.com.cn/weather/101250101.shtml
[INFO][2024-06-14 20:32:36][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '91c926522282145eb0846e6dfb90a4dd6fcec17c', 'timestamp': '1718368356', 'nonce': '1718577038'}>
[INFO][2024-06-14 20:32:36][chat_gpt_bot.py:49] - [CHATGPT] query=ä¸Šæµ·æ˜å¤©å¤©æ°”
[WARNING][2024-06-14 20:32:36][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:32:44][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[ERROR][2024-06-14 20:32:44][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 20:32:57][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '172303e5ce33e4fc71aa243cc90d47b692d38998', 'timestamp': '1718368377', 'nonce': '1718448203'}>
[INFO][2024-06-14 20:32:57][chat_gpt_bot.py:49] - [CHATGPT] query=é±¼é¦™è‚‰ä¸çš„èœè°±å’Œçƒ­é‡
[WARNING][2024-06-14 20:32:57][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:33:20][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:33:20][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥å¸®æ‚¨æŸ¥è¯¢ä¸€ä¸‹é±¼é¦™è‚‰ä¸çš„èœè°±å’Œçƒ­é‡ã€‚

é±¼é¦™è‚‰ä¸æ˜¯ä¸€é“éå¸¸ç»å…¸çš„å·èœï¼Œä¸»è¦ç”±çŒªè‚‰ã€æœ¨è€³ã€ç¬‹ä¸ã€èƒ¡èåœä¸ç­‰é£Ÿæåˆ¶ä½œè€Œæˆï¼Œè°ƒæ–™åŒ…æ‹¬é…±æ²¹ã€é†‹ã€ç³–ã€æ–™é…’ã€å§œæœ«ã€è’œæœ«ã€è¾£æ¤’æœ«ç­‰ã€‚ä»¥ä¸‹æ˜¯é±¼é¦™è‚‰ä¸çš„ç®€æ˜“åšæ³•ï¼š

1. å‡†å¤‡é£Ÿæï¼šçŒªè‚‰åˆ‡ä¸ï¼Œæœ¨è€³æ³¡å‘åˆ‡ä¸ï¼Œç¬‹åˆ‡ä¸ï¼Œèƒ¡èåœåˆ‡ä¸ï¼Œå§œè’œåˆ‡æœ«ï¼Œè¾£æ¤’åˆ‡æœ«ã€‚
2. è…Œåˆ¶è‚‰ä¸ï¼šå°†è‚‰ä¸ç”¨å°‘è®¸ç›ã€æ–™é…’ã€ç”ŸæŠ½ã€ç”Ÿç²‰è…Œåˆ¶10åˆ†é’Ÿã€‚
3. ç‚’åˆ¶ï¼šé”…ä¸­åŠ æ²¹ï¼Œå…ˆå°†è‚‰ä¸ç‚’è‡³å˜è‰²ï¼Œç››å‡ºå¤‡ç”¨ã€‚
4. é”…ä¸­ç•™åº•æ²¹ï¼ŒåŠ å…¥å§œè’œæœ«ã€è¾£æ¤’æœ«çˆ†é¦™ï¼Œå†åŠ å…¥æœ¨è€³ã€ç¬‹ä¸ã€èƒ¡èåœä¸ç¿»ç‚’ã€‚
5. åŠ å…¥è‚‰ä¸ï¼ŒåŠ å…¥é…±æ²¹ã€é†‹ã€ç³–ã€ç›ç­‰è°ƒæ–™ï¼Œç¿»ç‚’å‡åŒ€ï¼Œå‡ºé”…å‰åŠ å…¥è‘±èŠ±ã€‚

å…³äºé±¼é¦™è‚‰ä¸çš„çƒ­é‡ï¼Œç”±äºä¸åŒé£Ÿæçš„çƒ­é‡å·®å¼‚ä»¥åŠçƒ¹é¥ªæ–¹å¼çš„ä¸åŒï¼Œå¾ˆéš¾ç»™å‡ºä¸€ä¸ªå‡†ç¡®çš„çƒ­é‡å€¼ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé±¼é¦™è‚‰ä¸çš„çƒ­é‡åœ¨æ¯100å…‹å¤§çº¦åœ¨100-150åƒå¡ä¹‹é—´ã€‚å¦‚æœæ‚¨éœ€è¦ç²¾ç¡®çš„çƒ­é‡è®¡ç®—ï¼Œå»ºè®®æ‚¨ä½¿ç”¨ä¸“ä¸šçš„è¥å…»åˆ†æè½¯ä»¶æˆ–ç½‘ç«™è¿›è¡Œè®¡ç®—ã€‚

é£é™©æç¤ºï¼š[ æœ¬å…¬ç›Šé¡¹ç›®ä½¿ç”¨ AI æŠ€æœ¯æä¾›ä¿¡æ¯ï¼Œå¯èƒ½å­˜åœ¨åå·®ã€‚ä¸€åˆ‡æ²»ç–—å’Œåˆ¤æ–­åº”ä»¥ä¸»æ²»åŒ»ç”Ÿå’Œæ‚£è€…åŠå…¶å®¶å±æ„è§ä¸ºå‡†ã€‚å¦‚æœæ‚¨è®¤ä¸ºä¿¡æ¯åå·®ä¼šå½±å“æ‚¨çš„æ²»ç–—ï¼Œè¯·å‹¿ä½¿ç”¨æœ¬å·¥å…·å’Œå†…å®¹ã€‚æœ¬é¡¹ç›®å·²äº‹å…ˆå‘ŠçŸ¥ï¼Œä¸æ‰¿æ‹…ä»»ä½•ä½¿ç”¨é£é™©ã€‚]

æ¨èä½¿ç”¨ [å°èƒ°è…ºç½‘é¡µç‰ˆ](https://aibot.samqin.asia) ä»¥è·å¾—å®Œæ•´ä¿¡æ¯ã€‚
[INFO][2024-06-14 20:39:55][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:39:55][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:39:56][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:39:56][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:44:11][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:44:11][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:44:11][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:44:11][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:44:11][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:44:11][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:44:12][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º8376ã€‚
[INFO][2024-06-14 20:44:12][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:44:12][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:44:12][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:44:12][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:44:12][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:44:12][role.py:69] - [Role] inited
[INFO][2024-06-14 20:44:12][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:44:12][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:44:12][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:44:24][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '01beafa2e5ba8c8814eb851118eb4ce55362f954', 'timestamp': '1718369064', 'nonce': '1718102948'}>
[INFO][2024-06-14 20:44:24][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 20:44:24][chat_gpt_bot.py:49] - [CHATGPT] query=ä¸Šæµ·æ˜å¤©å¤©æ°”
[WARNING][2024-06-14 20:44:24][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:44:33][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:44:33][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½æ˜å¤©ï¼ˆ2024å¹´6æœˆ15æ—¥ï¼‰ä¸Šæµ·çš„å¤©æ°”é¢„æŠ¥æ˜¾ç¤ºï¼Œå¤©æ°”å°†ä¼šç”±å¤šäº‘è½¬ä¸ºé˜´å¤©ã€‚æœ€é«˜æ°”æ¸©é¢„è®¡å°†è¾¾åˆ°33æ‘„æ°åº¦ï¼Œæœ€ä½æ°”æ¸©åˆ™ä¸º24æ‘„æ°åº¦ã€‚é£åŠ›çº§åˆ«å°†å°äº3çº§ã€‚

æœç´¢ç»“æœæ¥è‡ªï¼š
ä¸Šæµ·å¤©æ°”é¢„æŠ¥,ä¸Šæµ·7å¤©å¤©æ°”é¢„æŠ¥,ä¸Šæµ·15å¤©å¤©æ°”é¢„æŠ¥,ä¸Šæµ·å¤©æ°”æŸ¥è¯¢ - http://weather.com.cn/weather/101020100.shtml
[INFO][2024-06-14 20:51:43][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '6934aaf21ecc4d99c5b04331a0b33ff7a94a37d2', 'timestamp': '1718369503', 'nonce': '1718058647'}>
[INFO][2024-06-14 20:51:43][chat_gpt_bot.py:49] - [CHATGPT] query=èƒ°è…ºç™Œç—…äººçº¢çƒ§è‚‰èƒ½åƒå—
[WARNING][2024-06-14 20:51:43][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:52:03][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:52:04][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œèƒ°è…ºç™Œæ‚£è€…åœ¨é¥®é£Ÿä¸Šéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå› ä¸ºèƒ°è…ºç™Œä¼šå½±å“èƒ°è…ºçš„åˆ†æ³ŒåŠŸèƒ½ï¼Œå¯¼è‡´æ¶ˆåŒ–ä¸è‰¯å’Œè¥å…»å¸æ”¶éšœç¢ã€‚çº¢çƒ§è‚‰å±äºé«˜è„‚è‚ªã€é«˜çƒ­é‡é£Ÿç‰©ï¼Œå¯¹äºèƒ°è…ºç™Œæ‚£è€…æ¥è¯´ï¼Œæ‘„å…¥è¿™ç±»é£Ÿç‰©å¯èƒ½ä¼šåŠ é‡èƒ°è…ºçš„è´Ÿæ‹…ï¼Œå¢åŠ æ¶ˆåŒ–ä¸è‰¯å’Œè¥å…»å¸æ”¶ä¸è‰¯çš„é£é™©ã€‚å› æ­¤ï¼Œä¸å»ºè®®èƒ°è…ºç™Œæ‚£è€…é£Ÿç”¨çº¢çƒ§è‚‰ã€‚

å¯¹äºèƒ°è…ºç™Œæ‚£è€…çš„é¥®é£Ÿï¼Œå»ºè®®é€‰æ‹©æ¸…æ·¡ã€ç»†è½¯ã€æ˜“æ¶ˆåŒ–çš„é£Ÿç‰©ï¼Œé¿å…æ²¹è…»ã€è¾›è¾£ç­‰åˆºæ¿€æ€§é£Ÿç‰©ã€‚åŒæ—¶ï¼Œå»ºè®®æ‚£è€…è¿›è¡Œè¥å…»å’¨è¯¢ï¼Œæ ¹æ®ä¸ªäººçš„è¥å…»çŠ¶å†µå’Œç—…æƒ…åˆ¶å®šåˆç†çš„é¥®é£Ÿè®¡åˆ’ã€‚

é£é™©æç¤ºï¼š[ æœ¬å…¬ç›Šé¡¹ç›®ä½¿ç”¨ AI æŠ€æœ¯æä¾›ä¿¡æ¯ï¼Œå¯èƒ½å­˜åœ¨åå·®ã€‚ä¸€åˆ‡æ²»ç–—å’Œåˆ¤æ–­åº”ä»¥ä¸»æ²»åŒ»ç”Ÿå’Œæ‚£è€…åŠå…¶å®¶å±æ„è§ä¸ºå‡†ã€‚å¦‚æœæ‚¨è®¤ä¸ºä¿¡æ¯åå·®ä¼šå½±å“æ‚¨çš„æ²»ç–—ï¼Œè¯·å‹¿ä½¿ç”¨æœ¬å·¥å…·å’Œå†…å®¹ã€‚æœ¬é¡¹ç›®å·²äº‹å…ˆå‘ŠçŸ¥ï¼Œä¸æ‰¿æ‹…ä»»ä½•ä½¿ç”¨é£é™©ã€‚]

æ¨èä½¿ç”¨ [å°èƒ°è…ºç½‘é¡µç‰ˆ](https://aibot.samqin.asia) ä»¥è·å¾—å®Œæ•´ä¿¡æ¯ã€‚
[INFO][2024-06-14 21:09:11][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '8a6123d6282c4a999de2280ac385b72e93f6c475', 'timestamp': '1718370551', 'nonce': '1718164721'}>
[INFO][2024-06-14 21:09:11][chat_gpt_bot.py:49] - [CHATGPT] query=ç™½æ–©é¸¡250gçš„è›‹ç™½è´¨å’Œçƒ­é‡
[WARNING][2024-06-14 21:09:11][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 21:09:35][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 21:09:35][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œå…³äºç™½æ–©é¸¡çš„è›‹ç™½è´¨å’Œçƒ­é‡ï¼Œç”±äºæ²¡æœ‰å…·ä½“çš„æ•°æ®æ¥æºï¼Œæˆ‘æ— æ³•æä¾›å‡†ç¡®çš„ç­”æ¡ˆã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ250gçš„ç™½æ–©é¸¡ï¼ˆä»¥é¸¡èƒ¸è‚‰ä¸ºä¾‹ï¼‰å¤§çº¦å«æœ‰25gå·¦å³çš„è›‹ç™½è´¨å’Œå¤§çº¦200-300åƒå¡çš„çƒ­é‡ï¼Œä½†è¿™ä¼šæ ¹æ®é¸¡è‚‰çš„éƒ¨ä½ã€çƒ¹é¥ªæ–¹å¼å’Œå…·ä½“çš„å“ç‰Œæˆ–æ¥æºæœ‰æ‰€ä¸åŒã€‚

å¯¹äºè‚¿ç˜¤æ‚£è€…æ¥è¯´ï¼Œé¥®é£Ÿåº”è¯¥å¤šæ ·åŒ–ï¼Œå¹¶ä¸”æ ¹æ®ä¸ªäººçš„è¥å…»éœ€æ±‚å’Œæ²»ç–—æƒ…å†µæ¥è°ƒæ•´ã€‚å¦‚æœæ‚£è€…æœ‰ç‰¹æ®Šçš„è¥å…»éœ€æ±‚æˆ–è€…æ­£åœ¨æ¥å—ç‰¹å®šçš„æ²»ç–—ï¼Œå»ºè®®å’¨è¯¢è¥å…»å¸ˆæˆ–åŒ»ç”Ÿä»¥è·å¾—ä¸ªæ€§åŒ–çš„å»ºè®®ã€‚

é£é™©æç¤ºï¼š[ æœ¬å…¬ç›Šé¡¹ç›®ä½¿ç”¨ AI æŠ€æœ¯æä¾›ä¿¡æ¯ï¼Œå¯èƒ½å­˜åœ¨åå·®ã€‚ä¸€åˆ‡æ²»ç–—å’Œåˆ¤æ–­åº”ä»¥ä¸»æ²»åŒ»ç”Ÿå’Œæ‚£è€…åŠå…¶å®¶å±æ„è§ä¸ºå‡†ã€‚å¦‚æœæ‚¨è®¤ä¸ºä¿¡æ¯åå·®ä¼šå½±å“æ‚¨çš„æ²»ç–—ï¼Œè¯·å‹¿ä½¿ç”¨æœ¬å·¥å…·å’Œå†…å®¹ã€‚æœ¬é¡¹ç›®å·²äº‹å…ˆå‘ŠçŸ¥ï¼Œä¸æ‰¿æ‹…ä»»ä½•ä½¿ç”¨é£é™©ã€‚]

æ¨èä½¿ç”¨ [å°èƒ°è…ºç½‘é¡µç‰ˆ](https://aibot.samqin.asia) ä»¥è·å¾—å®Œæ•´ä¿¡æ¯ã€‚
[INFO][2024-06-15 07:10:20][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-15 07:10:20][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-15 07:10:21][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-15 07:10:21][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-15 07:10:21][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-15 07:10:21][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-15 07:10:22][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º1029ã€‚
[INFO][2024-06-15 07:10:22][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-15 07:10:22][keyword.py:40] - [keyword] {}
[INFO][2024-06-15 07:10:22][keyword.py:42] - [keyword] inited.
[INFO][2024-06-15 07:10:22][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-15 07:10:23][tool.py:28] - [tool] inited
[INFO][2024-06-15 07:10:23][role.py:69] - [Role] inited
[INFO][2024-06-15 07:10:23][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-15 07:10:23][hello.py:38] - [Hello] inited
[INFO][2024-06-15 07:10:23][finish.py:23] - [Finish] inited
[INFO][2024-06-15 07:11:24][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-15 07:11:24][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-15 07:11:24][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-15 07:11:24][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-15 07:11:24][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-15 07:11:24][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-15 07:11:25][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º6320ã€‚
[INFO][2024-06-15 07:11:25][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-15 07:11:25][keyword.py:40] - [keyword] {}
[INFO][2024-06-15 07:11:25][keyword.py:42] - [keyword] inited.
[INFO][2024-06-15 07:11:25][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-15 07:11:25][tool.py:28] - [tool] inited
[INFO][2024-06-15 07:11:25][role.py:69] - [Role] inited
[INFO][2024-06-15 07:11:25][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-15 07:11:25][hello.py:38] - [Hello] inited
[INFO][2024-06-15 07:11:25][finish.py:23] - [Finish] inited
[INFO][2024-06-15 07:11:35][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '7586829c0aaca58f8b8b9cff117b883e2d56d284', 'nonce': '1718356094', 'timestamp': '1718406695'}>
[INFO][2024-06-15 07:11:35][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-15 07:11:35][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[WARNING][2024-06-15 07:11:35][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[INFO][2024-06-15 07:18:49][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-15 07:18:49][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-15 07:18:49][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-15 07:18:49][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-15 07:18:49][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-15 07:18:49][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º3750ã€‚
[INFO][2024-06-15 07:18:49][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-15 07:18:49][keyword.py:40] - [keyword] {}
[INFO][2024-06-15 07:18:49][keyword.py:42] - [keyword] inited.
[INFO][2024-06-15 07:18:49][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-15 07:18:50][tool.py:28] - [tool] inited
[INFO][2024-06-15 07:18:50][role.py:69] - [Role] inited
[INFO][2024-06-15 07:18:50][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-15 07:18:50][hello.py:38] - [Hello] inited
[INFO][2024-06-15 07:18:50][finish.py:23] - [Finish] inited
[INFO][2024-06-15 07:18:59][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'nonce': '1718474162', 'timestamp': '1718407139', 'msg_signature': '83e695eb7440c17e937b466f279bc7cd1dd9427b'}>
[INFO][2024-06-15 07:18:59][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-15 07:18:59][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[WARNING][2024-06-15 07:18:59][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-15 07:19:01][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-15 07:19:01][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
æ‚¨å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï¼Œæˆ‘æ¥äº†ï½ä½ å¥½ï¼Œæˆ‘æ˜¯å°èƒ°å®ï½
[INFO][2024-06-15 07:47:32][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-15 07:47:32][config.py:219] - [Config] User datas saved.
[INFO][2024-06-15 07:47:34][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-15 07:47:34][config.py:219] - [Config] User datas saved.
[INFO][2024-06-15 07:47:47][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-15 07:47:47][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-15 07:47:48][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-15 07:47:48][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-15 07:47:48][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-15 07:47:48][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º6458ã€‚
[INFO][2024-06-15 07:47:48][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-15 07:47:48][keyword.py:40] - [keyword] {}
[INFO][2024-06-15 07:47:48][keyword.py:42] - [keyword] inited.
[INFO][2024-06-15 07:47:48][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-15 07:47:49][tool.py:28] - [tool] inited
[INFO][2024-06-15 07:47:49][role.py:69] - [Role] inited
[INFO][2024-06-15 07:47:49][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-15 07:47:49][hello.py:38] - [Hello] inited
[INFO][2024-06-15 07:47:49][finish.py:23] - [Finish] inited
[INFO][2024-06-15 07:47:51][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-15 07:47:51][config.py:219] - [Config] User datas saved.
[INFO][2024-06-15 07:47:53][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-15 07:47:53][config.py:219] - [Config] User datas saved.
[INFO][2024-06-15 07:48:18][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPTæµ‹è¯•ç¾¤', 'ChatGPTæµ‹è¯•ç¾¤2'], 'image_create_prefix': ['ç”»'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': 'ä½ æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„AIæ™ºèƒ½åŠ©æ‰‹ï¼Œæ—¨åœ¨å›ç­”å¹¶è§£å†³äººä»¬çš„ä»»ä½•é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å¤šç§è¯­è¨€ä¸äººäº¤æµã€‚', 'temperature': 0.7, 'subscribe_msg': 'æ„Ÿè°¢æ‚¨çš„å…³æ³¨ï¼\nè¿™é‡Œæ˜¯AIæ™ºèƒ½åŠ©æ‰‹ï¼Œå¯ä»¥è‡ªç”±å¯¹è¯ã€‚\næ”¯æŒè¯­éŸ³å¯¹è¯ã€‚\næ”¯æŒå›¾ç‰‡è¾“å…¥ã€‚\næ”¯æŒå›¾ç‰‡è¾“å‡ºï¼Œç”»å­—å¼€å¤´çš„æ¶ˆæ¯å°†æŒ‰è¦æ±‚åˆ›ä½œå›¾ç‰‡ã€‚\næ”¯æŒtoolã€è§’è‰²æ‰®æ¼”å’Œæ–‡å­—å†’é™©ç­‰ä¸°å¯Œçš„æ’ä»¶ã€‚\nè¾“å…¥{trigger_prefix}#help æŸ¥çœ‹è¯¦ç»†æŒ‡ä»¤ã€‚', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-15 07:48:18][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-15 07:48:18][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-15 07:48:18][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-15 07:48:18][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-15 07:48:18][godcmd.py:194] - [Godcmd] å› æœªè®¾ç½®å£ä»¤ï¼Œæœ¬æ¬¡çš„ä¸´æ—¶å£ä»¤ä¸º2586ã€‚
[INFO][2024-06-15 07:48:18][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-15 07:48:18][keyword.py:40] - [keyword] {}
[INFO][2024-06-15 07:48:18][keyword.py:42] - [keyword] inited.
[INFO][2024-06-15 07:48:18][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'æµ‹è¯•ç¾¤å1': 'default', 'æµ‹è¯•ç¾¤å2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-15 07:48:19][tool.py:28] - [tool] inited
[INFO][2024-06-15 07:48:19][role.py:69] - [Role] inited
[INFO][2024-06-15 07:48:19][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-15 07:48:19][hello.py:38] - [Hello] inited
[INFO][2024-06-15 07:48:19][finish.py:23] - [Finish] inited
