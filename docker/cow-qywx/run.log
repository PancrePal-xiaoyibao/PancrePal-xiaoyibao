[INFO][2024-06-14 17:54:28][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-3', 'voice_to_text': 'whisper-1', 'text_to_voice': 'speech-02', 'proxy': '', 'hot_reload': False, 'single_chat_prefix': [''], 'single_chat_reply_prefix': '[bot] ', 'group_chat_prefix': ['@sambot', 'sambot'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2', '小胰宝开源团队', '大叔三人行', '小胰宝一家人', '胰腺交流小群'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是AI小助手，旨在有逻辑地回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.8, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': 'Link_0gw2yNAVB7KhZEblTCXoFh6GgxuXfmZ9ER53IZr2tJ', 'linkai_app_code': '1Rpf4gh0'}
[INFO][2024-06-14 17:54:28][config.py:210] - [Config] User datas file not found, ignore.
[INFO][2024-06-14 17:54:28][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 17:54:28][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 17:54:28][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 17:54:28][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 17:54:29][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin GODCMD not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin KEYWORD not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin BANWORDS not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin LINKAI not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin TOOL not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin ROLE not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin DUNGEON not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin BDUNIT not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin HELLO not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][plugin_manager.py:123] - Plugin FINISH not found in pconfig, adding to pconfig...
[INFO][2024-06-14 17:54:29][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为2913。
[INFO][2024-06-14 17:54:29][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 17:54:29][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 17:54:29][keyword.py:42] - [keyword] inited.
[WARNING][2024-06-14 17:54:29][banwords.py:54] - [Banwords] init failed, ignore or see https://github.com/zhayujie/chatgpt-on-wechat/tree/master/plugins/banwords .
[WARNING][2024-06-14 17:54:29][plugin_manager.py:150] - Failed to init BANWORDS, diabled. [Errno 2] No such file or directory: '/usr/cow-qywx/chatgpt-on-wechat/plugins/banwords/banwords.txt'
[INFO][2024-06-14 17:54:29][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 17:54:29][tool.py:28] - [tool] inited
[INFO][2024-06-14 17:54:29][role.py:69] - [Role] inited
[INFO][2024-06-14 17:54:29][dungeon.py:56] - [Dungeon] inited
[WARNING][2024-06-14 17:54:29][bdunit.py:42] - [BDunit] init failed, ignore 
[WARNING][2024-06-14 17:54:29][plugin_manager.py:150] - Failed to init BDUNIT, diabled. config.json not found
[INFO][2024-06-14 17:54:29][hello.py:38] - [Hello] inited
[INFO][2024-06-14 17:54:29][finish.py:23] - [Finish] inited
[INFO][2024-06-14 17:54:35][wechatcomapp_channel.py:133] - [wechatcom] receive params: <Storage {'msg_signature': '55055a6f7e2a06553ec844579248dfcf3c39c0d2', 'echostr': 'yeSUb4LWa9miXEgtolfwI5zoUi5CsaIVf7usJh6Dn7zLl+B7GzIFKwCDhPDiE3aqwFixphnXVwpuN3JyYFYAcA==', 'timestamp': '1718358875', 'nonce': '1717984851'}>
[INFO][2024-06-14 17:54:52][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '899c79dd13d66f7c3b50739e85d5a89f220006b5', 'timestamp': '1718358892', 'nonce': '1717897813'}>
[INFO][2024-06-14 17:54:52][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 17:54:52][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[ERROR][2024-06-14 17:55:05][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 17:56:49][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 17:56:49][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 17:56:51][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 17:56:51][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:00:43][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'YOUR API KEY', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'claude_api_key': 'YOUR API KEY', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_prefix': ['', '@xyb'], 'single_chat_reply_prefix': '[bot] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:00:43][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:00:43][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:00:43][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:00:43][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:00:43][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:00:44][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:00:44][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为5374。
[INFO][2024-06-14 18:00:44][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:00:44][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:00:44][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:00:44][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:00:44][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:00:44][role.py:69] - [Role] inited
[INFO][2024-06-14 18:00:44][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:00:44][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:00:44][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:00:51][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'nonce': '1717608777', 'msg_signature': '9fdc2600c6bd53cb75a8802a440ba9a1c79cb171', 'timestamp': '1718359251'}>
[INFO][2024-06-14 18:00:52][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 18:00:52][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[ERROR][2024-06-14 18:00:52][chat_gpt_bot.py:155] - [CHATGPT] Exception: 'usage'
Traceback (most recent call last):
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/chatgpt/chat_gpt_bot.py", line 127, in reply_text
    "total_tokens": response["usage"]["total_tokens"],
KeyError: 'usage'
[INFO][2024-06-14 18:00:53][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [ERROR]
我现在有点累了，等会再来吧
[INFO][2024-06-14 18:01:18][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'nonce': '1718305671', 'msg_signature': '70caf370148e80bfe923cada1d1a7cd8ba07b06c', 'timestamp': '1718359278'}>
[INFO][2024-06-14 18:01:18][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[ERROR][2024-06-14 18:01:18][chat_gpt_bot.py:155] - [CHATGPT] Exception: 'usage'
Traceback (most recent call last):
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/chatgpt/chat_gpt_bot.py", line 127, in reply_text
    "total_tokens": response["usage"]["total_tokens"],
KeyError: 'usage'
[INFO][2024-06-14 18:01:19][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [ERROR]
我现在有点累了，等会再来吧
[INFO][2024-06-14 18:01:23][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:01:23][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:01:24][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:01:24][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:02:22][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_prefix': ['', '@xyb'], 'single_chat_reply_prefix': '[bot] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:02:22][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:02:22][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:02:22][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:02:22][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:02:22][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:02:22][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为4312。
[INFO][2024-06-14 18:02:22][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:02:22][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:02:22][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:02:22][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:02:23][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:02:23][role.py:69] - [Role] inited
[INFO][2024-06-14 18:02:23][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:02:23][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:02:23][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:02:30][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'a1a73b85cd1273e9241d09cee615b29f8652c5c6', 'nonce': '1717747225', 'timestamp': '1718359349'}>
[INFO][2024-06-14 18:02:30][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 18:02:30][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[ERROR][2024-06-14 18:02:48][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 18:03:30][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:03:30][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:03:31][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:03:31][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:03:48][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_prefix': ['xyb', '@xyb'], 'single_chat_reply_prefix': '[bot] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:03:48][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:03:48][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:03:48][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:03:48][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:03:48][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:03:48][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为9816。
[INFO][2024-06-14 18:03:48][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:03:48][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:03:48][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:03:48][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:03:49][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:03:49][role.py:69] - [Role] inited
[INFO][2024-06-14 18:03:49][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:03:49][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:03:49][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:03:53][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'nonce': '1718051748', 'msg_signature': 'a0fabaab7bf2fb4a0621b6fb2369671a9b59ed44', 'timestamp': '1718359433'}>
[INFO][2024-06-14 18:07:33][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:07:33][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:07:34][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:07:34][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:08:54][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:08:54][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:08:54][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:08:54][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:08:54][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:08:54][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:08:55][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:08:55][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为9213。
[INFO][2024-06-14 18:08:55][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:08:55][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:08:55][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:08:55][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:08:55][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:08:55][role.py:69] - [Role] inited
[INFO][2024-06-14 18:08:55][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:08:55][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:08:55][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:09:01][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'd27194845931942a90ac2f4513ca8b4e730429d9', 'nonce': '1717718448', 'timestamp': '1718359740'}>
[INFO][2024-06-14 18:09:01][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 18:09:01][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[INFO][2024-06-14 18:09:04][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～你好👋！我是人工智能助手智谱清言（ChatGLM），很高兴见到你，欢迎问我任何问题。
[INFO][2024-06-14 18:12:45][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '8430c4f2c9f7b3883e8b1aff9cea6356fa3e9745', 'nonce': '1718371485', 'timestamp': '1718359965'}>
[INFO][2024-06-14 18:12:45][chat_gpt_bot.py:49] - [CHATGPT] query=嗯嗯
[INFO][2024-06-14 18:13:04][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 你好，我是小胰宝～，胰腺癌智能患者AI小助手。如果您有任何问题或需要帮助，请随时告诉我。祝您和家人身体健康！【风险提示：[ 本公益项目使用 AI 技术提供信息，可能存在偏差。一切治疗和判断应以主治医生和患者及其家属意见为准。如果您认为信息偏差会影响您的治疗，请勿使用本工具和内容。本项目已事先告知，不承担任何使用风险。]】【推荐使用 [小胰腺网页版](https://aibot.samqin.asia) 以获得完整信息]
[INFO][2024-06-14 18:13:18][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '9ece003f8c937d29a18400812c03d2e6503e2956', 'nonce': '1717619160', 'timestamp': '1718359998'}>
[INFO][2024-06-14 18:13:18][chat_gpt_bot.py:49] - [CHATGPT] query=介绍下罗国培医生
[INFO][2024-06-14 18:13:53][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 罗国培医生是一位在肿瘤营养领域具有丰富经验的专家。他在肿瘤患者的营养支持治疗方面有着深入的研究，特别是在食管癌、胃癌等消化道肿瘤的营养治疗方面。罗国培医生强调，营养支持治疗是肿瘤患者综合治疗的重要组成部分，能够改善患者的营养状况，提高患者对放化疗的耐受力。

罗国培医生认为，肿瘤患者的营养不良是一个复杂的临床问题，需要综合考虑患者的疾病状况、治疗方式以及个体差异。他主张在肿瘤治疗过程中，应早期进行营养风险筛查和评估，并根据患者的具体情况制定个性化的营养治疗方案。

此外，罗国培医生还强调，营养治疗不仅仅是提供营养支持，还包括对患者进行营养教育，帮助他们建立健康的饮食习惯，提高生活质量。

总的来说，罗国培医生在肿瘤营养领域的研究和实践，为肿瘤患者的营养治疗提供了重要的指导和支持。

【风险提示：[ 本公益项目使用 AI 技术提供信息，可能存在偏差。一切治疗和判断应以主治医生和患者及其家属意见为准。如果您认为信息偏差会影响您的治疗，请勿使用本工具和内容。本项目已事先告知，不承担任何使用风险。]】【推荐使用 [小胰腺网页版](https://aibot.samqin.asia) 以获得完整信息】
[INFO][2024-06-14 18:14:16][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'baaba77fe0d86c4d1b4db56f68ead6991c629a3a', 'nonce': '1717620778', 'timestamp': '1718360056'}>
[INFO][2024-06-14 18:14:16][chat_gpt_bot.py:49] - [CHATGPT] query=搜索下罗国培医生
[ERROR][2024-06-14 18:14:42][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 18:14:56][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '8d49527fa86c07b8945ab568f5ecd36fdaa19465', 'nonce': '1717573559', 'timestamp': '1718360096'}>
[INFO][2024-06-14 18:14:56][chat_gpt_bot.py:49] - [CHATGPT] query=搜索下罗国培医生
[WARNING][2024-06-14 18:14:56][session_manager.py:72] - Exception when counting tokens precisely for prompt: expected string or buffer
[INFO][2024-06-14 18:15:15][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～罗国培医生是复旦大学附属肿瘤医院胰腺外科的副主任医师。他于2010年从复旦大学毕业，获得外科学博士学位，并师从我国著名的胰腺外科专家倪泉兴教授。罗国培医生曾于2008年国家公派至美国加州大学尔湾分校联合培养。目前，他在复旦大学附属肿瘤医院胰腺外科工作，主要致力于胰腺肝胆肿瘤的临床诊治工作，每年完成胰腺肝胆手术200余台。

在临床治疗方面，罗国培医生擅长胰腺癌、胰腺神经内分泌肿瘤、胆囊癌等疾病的治疗，包括化疗、放疗、靶向治疗、细胞治疗和免疫治疗。他还擅长处理如胰岛细胞瘤、胃泌素瘤、胰腺导管内乳头状粘液瘤变（IPMN）、实性假乳头状肿瘤（SPT）、粘液性囊腺瘤、浆液性囊腺瘤和胰腺囊肿等疾病。

罗国培医生在科研方面也有显著成就，他先后作为项目负责人承担了多个项目，如国家自然科学基金、上海市科委启明星计划、上海市自然科学基金等，并发表了50余篇SCI论文，包括在Journal of Clinical Oncology、Annals of Surgery等国际权威期刊上发表的文章。此外，他还获得了2项专利。

关于罗国培医生的更多信息，您可以参考复旦大学附属肿瘤医院的官方网站或相关健康信息平台。

搜索结果来自：
罗国培医生简介-复旦大学附属肿瘤医院胰腺外科-百度健康 - https://health.baidu.com/doctordec/jianjie/d0ss8cb3qog4t322or8g
罗国培_复旦大学附属肿瘤医院胰腺外科_罗国培挂号 - 有来医生 - https://m.youlai.cn/yyk/docindex/35593/
【罗国培】复旦大学附属肿瘤医院-胰腺外科-图文咨询-电话咨询-预约挂号-百度健康 - https://health.baidu.com/doctordec/dochome/88939
[INFO][2024-06-14 18:15:36][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:15:36][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:15:37][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 18:15:37][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:16:26][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:16:26][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:16:27][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:16:27][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:16:27][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:16:27][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:16:28][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:16:28][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为8465。
[INFO][2024-06-14 18:16:28][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:16:28][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:16:28][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:16:28][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:16:29][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:16:29][role.py:69] - [Role] inited
[INFO][2024-06-14 18:16:29][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:16:29][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:16:29][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:16:54][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:16:54][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:16:54][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:16:54][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:16:54][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:16:54][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:16:54][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为2654。
[INFO][2024-06-14 18:16:54][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:16:54][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:16:54][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:16:54][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:16:55][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:16:55][role.py:69] - [Role] inited
[INFO][2024-06-14 18:16:55][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:16:55][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:16:55][finish.py:23] - [Finish] inited
[ERROR][2024-06-14 18:16:55][app.py:66] - App startup failed!
[ERROR][2024-06-14 18:16:55][app.py:67] - No socket could be created -- (('0.0.0.0', 9898): [Errno 98] Address already in use)
Traceback (most recent call last):
  File "app.py", line 61, in run
    start_channel(channel_name)
  File "app.py", line 40, in start_channel
    channel.startup()
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/wechatcom/wechatcomapp_channel.py", line 50, in startup
    web.httpserver.runsimple(app.wsgifunc(), ("0.0.0.0", port))
  File "/usr/local/python3/lib/python3.8/site-packages/web/httpserver.py", line 176, in runsimple
    server.start()
  File "/usr/local/python3/lib/python3.8/site-packages/cheroot/server.py", line 1844, in start
    self.prepare()
  File "/usr/local/python3/lib/python3.8/site-packages/cheroot/server.py", line 1799, in prepare
    raise socket.error(msg)
OSError: No socket could be created -- (('0.0.0.0', 9898): [Errno 98] Address already in use)
[INFO][2024-06-14 18:17:21][app.py:19] - signal 15 received, exiting...
[INFO][2024-06-14 18:17:21][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 18:17:23][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 18:17:23][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 18:17:24][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 18:17:24][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 18:17:24][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 18:17:24][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 18:17:24][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为2045。
[INFO][2024-06-14 18:17:24][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 18:17:24][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 18:17:24][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 18:17:24][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 18:17:25][tool.py:28] - [tool] inited
[INFO][2024-06-14 18:17:25][role.py:69] - [Role] inited
[INFO][2024-06-14 18:17:25][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 18:17:25][hello.py:38] - [Hello] inited
[INFO][2024-06-14 18:17:25][finish.py:23] - [Finish] inited
[INFO][2024-06-14 18:17:52][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718360272', 'msg_signature': '34112948c64db5c0f047b32256830b75892ec544', 'nonce': '1718086935'}>
[INFO][2024-06-14 18:17:52][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 18:17:52][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[INFO][2024-06-14 18:17:55][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～你好，我是小胰宝～
[INFO][2024-06-14 18:18:12][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718360292', 'msg_signature': '41f2d5028b7ccec6c35b9bc0b50e4af7508657c8', 'nonce': '1717936354'}>
[INFO][2024-06-14 18:18:12][chat_gpt_bot.py:49] - [CHATGPT] query=我有点累 开个放松的钢琴曲
[INFO][2024-06-14 18:18:21][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～很抱歉，我目前无法直接播放音乐。不过，我可以推荐一些放松的钢琴曲给您。您可以在音乐平台或视频网站上搜索这些曲子来聆听：

1. **Ludovico Einaudi** - "Nuvole Bianche"
2. **Yiruma** - "River Flows in You"
3. **Brian Crain** - "Butterfly Waltz"
4. **Claude Debussy** - "Clair de Lune"
5. **Erik Satie** - "Gymnopédie No.1"

希望这些建议能帮助您放松。
[INFO][2024-06-14 18:19:33][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718360373', 'msg_signature': '10632845ca60577c3d3353dc82399ce85d324f5d', 'nonce': '1717983531'}>
[INFO][2024-06-14 18:19:33][chat_gpt_bot.py:49] - [CHATGPT] query=你是谁
[INFO][2024-06-14 18:19:42][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 你好，我是小胰宝～
[INFO][2024-06-14 18:22:22][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718360542', 'msg_signature': '9f4ba1e2402ee41f6ee3f4c69a1700ae3713adf0', 'nonce': '1718108647'}>
[INFO][2024-06-14 18:22:22][chat_gpt_bot.py:49] - [CHATGPT] query=上海今天天气
[INFO][2024-06-14 18:22:30][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～上海今天的天气是阴天，气温范围在31℃到23℃之间，风力小于3级。

搜索结果来自：
上海天气预报,上海7天天气预报,上海15天天气预报,上海天气查询 - http://weather.com.cn/weather/101020100.shtml
[INFO][2024-06-14 18:52:36][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718362356', 'msg_signature': '0abbc3889c5af157bf65ff19687c2191491a45e5', 'nonce': '1718272645'}>
[INFO][2024-06-14 18:52:36][chat_gpt_bot.py:49] - [CHATGPT] query=搜索下庄表伟
[ERROR][2024-06-14 18:52:44][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 18:53:55][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718362435', 'msg_signature': '1666231bb690e564ee2841658d243b4768de7b78', 'nonce': '1718614679'}>
[INFO][2024-06-14 18:53:55][chat_gpt_bot.py:49] - [CHATGPT] query=搜索下庄表伟
[WARNING][2024-06-14 18:53:55][session_manager.py:72] - Exception when counting tokens precisely for prompt: expected string or buffer
[WARNING][2024-06-14 18:54:00][chat_gpt_bot.py:145] - [CHATGPT] Bad Gateway: Invalid response object from API: '{"code":500,"statusText":"","message":"Cannot read properties of undefined (reading \'value\')","data":null}' (HTTP response code was 500)
[WARNING][2024-06-14 18:54:10][chat_gpt_bot.py:160] - [CHATGPT] 第1次重试
[INFO][2024-06-14 18:54:26][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～庄表伟是一位资深的开源推广者和研究者。他在1997年毕业后，一直活跃在编程领域，并于2009年加入盛大创新院。他热衷于开源社区的活动，并积极参与各种交流。庄表伟贡献了很多在开源领域的工作，包括一个正在进行的写作计划《借助开源项目，学习软件开发》。

庄表伟曾发起了“我们的开源项目”活动，旨在为开发者提供一个分享和讨论自己开源项目的平台。这个活动得到了广泛的响应，吸引了众多开发者的参与，并成功举办了多场活动。他通过这些活动，促进了开发者之间的交流和合作。

此外，庄表伟在开源社中担任重要角色，他对开源项目的管理和推动有着深刻的见解。他强调，开源项目应该注重长期可持续性，而不是仅仅追求短期的成果。庄表伟认为，一个好的开源生态应该包括热情的开源开发者、能够培育优秀开发者和项目的教育机构、资助开源项目的基金会，以及愿意支持开源的企业。

庄表伟对于开源社区和项目的运营有着丰富的经验和深入的思考，他的工作和观点对于推动开源文化和项目的发展具有重要意义。

搜索结果来自：
“我们的开源项目”活动发起人——庄表伟专访-云社区-华为云 - https://bbs.huaweicloud.com/blogs/104682
开源社庄表伟：开源要出圈了，推坑文化、沉浸式养鱼塘，社区建设心法了解一下 I OpenTEKr 大话开源 Vol.5_大话开源_OpenTEKr_InfoQ写作社区 - https://xie.infoq.cn/article/6bdcda08b3ed4be1097335500
开源社理事庄表伟：KPI拉不动开源，是工具生了锈还是另有讲究？ - https://baijiahao.baidu.com/s?id=1762481528272673779
[INFO][2024-06-14 19:30:00][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 19:30:00][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 19:30:01][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 19:30:01][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 19:30:01][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 19:30:01][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 19:30:02][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 19:30:02][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为0369。
[INFO][2024-06-14 19:30:02][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 19:30:02][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 19:30:02][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 19:30:02][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 19:30:03][tool.py:28] - [tool] inited
[INFO][2024-06-14 19:30:03][role.py:69] - [Role] inited
[INFO][2024-06-14 19:30:03][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 19:30:03][hello.py:38] - [Hello] inited
[INFO][2024-06-14 19:30:03][finish.py:23] - [Finish] inited
[ERROR][2024-06-14 19:30:03][app.py:66] - App startup failed!
[ERROR][2024-06-14 19:30:03][app.py:67] - No socket could be created -- (('0.0.0.0', 9898): [Errno 98] Address already in use)
Traceback (most recent call last):
  File "app.py", line 61, in run
    start_channel(channel_name)
  File "app.py", line 40, in start_channel
    channel.startup()
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/wechatcom/wechatcomapp_channel.py", line 50, in startup
    web.httpserver.runsimple(app.wsgifunc(), ("0.0.0.0", port))
  File "/usr/local/python3/lib/python3.8/site-packages/web/httpserver.py", line 176, in runsimple
    server.start()
  File "/usr/local/python3/lib/python3.8/site-packages/cheroot/server.py", line 1844, in start
    self.prepare()
  File "/usr/local/python3/lib/python3.8/site-packages/cheroot/server.py", line 1799, in prepare
    raise socket.error(msg)
OSError: No socket could be created -- (('0.0.0.0', 9898): [Errno 98] Address already in use)
[INFO][2024-06-14 19:31:01][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 19:31:01][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 19:31:02][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 19:31:02][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 19:31:02][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 19:31:02][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 19:31:02][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为1947。
[INFO][2024-06-14 19:31:02][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 19:31:02][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 19:31:02][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 19:31:02][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 19:31:04][tool.py:28] - [tool] inited
[INFO][2024-06-14 19:31:04][role.py:69] - [Role] inited
[INFO][2024-06-14 19:31:04][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 19:31:04][hello.py:38] - [Hello] inited
[INFO][2024-06-14 19:31:04][finish.py:23] - [Finish] inited
[INFO][2024-06-14 19:31:19][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'aedb9c8f838aa4ec6d2595c8acb4df8112541403', 'nonce': '1717956572', 'timestamp': '1718364679'}>
[INFO][2024-06-14 19:31:19][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 19:31:19][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[WARNING][2024-06-14 19:31:19][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 19:31:21][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 19:31:22][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～你好，我是小胰宝～
[INFO][2024-06-14 19:35:25][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'c6732cf65f13c65b0645fa92e4a4c0b268465655', 'nonce': '1718235218', 'timestamp': '1718364925'}>
[INFO][2024-06-14 19:35:25][chat_gpt_bot.py:49] - [CHATGPT] query=今天北京天气
[WARNING][2024-06-14 19:35:25][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 19:35:34][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 19:35:34][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～今天北京的天气预报显示，天气状况为多云转小雨，气温范围在37℃到23℃之间，风力小于3级。请注意，这些信息可能会根据实时气象条件发生变化。

搜索结果来自：
北京天气预报,北京7天天气预报,北京15天天气预报,北京天气查询 - http://weather.com.cn/weather/101010100.shtml
[INFO][2024-06-14 19:44:36][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'e3527c9bd2a1b909c1ee5f1381f8e9158bb55de6', 'nonce': '1718502237', 'timestamp': '1718365476'}>
[INFO][2024-06-14 19:44:36][chat_gpt_bot.py:49] - [CHATGPT] query=搜索下庄表伟
[WARNING][2024-06-14 19:44:36][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 19:44:47][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[ERROR][2024-06-14 19:44:47][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 19:45:05][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '84071d27eab7f9ae788bad9e9a6729861fcaaf53', 'nonce': '1718119294', 'timestamp': '1718365505'}>
[INFO][2024-06-14 19:45:05][chat_gpt_bot.py:49] - [CHATGPT] query=搜索下庄表伟
[WARNING][2024-06-14 19:45:05][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 19:45:11][chat_gpt_bot.py:145] - [CHATGPT] Bad Gateway: Invalid response object from API: '{"code":500,"statusText":"","message":"Cannot read properties of undefined (reading \'value\')","data":null}' (HTTP response code was 500)
[WARNING][2024-06-14 19:45:21][chat_gpt_bot.py:160] - [CHATGPT] 第1次重试
[WARNING][2024-06-14 19:45:48][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[ERROR][2024-06-14 19:45:48][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 19:56:32][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 19:56:32][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 19:56:33][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 19:56:33][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 19:59:22][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 19:59:22][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 19:59:22][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 19:59:22][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 19:59:22][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 19:59:22][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 19:59:23][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 19:59:23][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为4867。
[INFO][2024-06-14 19:59:23][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 19:59:23][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 19:59:23][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 19:59:23][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 19:59:24][tool.py:28] - [tool] inited
[INFO][2024-06-14 19:59:24][role.py:69] - [Role] inited
[INFO][2024-06-14 19:59:24][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 19:59:24][hello.py:38] - [Hello] inited
[INFO][2024-06-14 19:59:24][finish.py:23] - [Finish] inited
[INFO][2024-06-14 19:59:31][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'b4c2cc51fadce674390a6eed2b8b30c9cedb261c', 'timestamp': '1718366371', 'nonce': '1717892845'}>
[INFO][2024-06-14 19:59:31][bridge.py:61] - create bot chatGPT for chat
[ERROR][2024-06-14 19:59:31][chat_channel.py:303] - Worker return exception: inconsistent use of tabs and spaces in indentation (chat_gpt_bot.py, line 80)
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 170, in _handle
    reply = self._generate_reply(context)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 182, in _generate_reply
    e_context = PluginManager().emit_event(
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/plugin_manager.py", line 191, in emit_event
    instance.handlers[e_context.event](e_context, *args, **kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/role/role.py", line 104, in on_handle_context
    bot = Bridge().get_bot("chat")
  File "/usr/cow-qywx/chatgpt-on-wechat/bridge/bridge.py", line 67, in get_bot
    self.bots[typename] = create_bot(self.btype[typename])
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/bot_factory.py", line 23, in create_bot
    from bot.chatgpt.chat_gpt_bot import ChatGPTBot
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/chatgpt/chat_gpt_bot.py", line 80
    if isinstance(reply_content["content"], list):
                                                 ^
TabError: inconsistent use of tabs and spaces in indentation
[INFO][2024-06-14 20:00:07][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:00:07][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:00:10][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:00:10][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:04:45][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:04:45][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:04:45][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:04:45][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:04:45][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:04:45][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:04:46][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:04:46][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为2680。
[INFO][2024-06-14 20:04:46][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:04:46][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:04:46][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:04:46][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:04:47][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:04:47][role.py:69] - [Role] inited
[INFO][2024-06-14 20:04:47][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:04:47][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:04:47][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:04:53][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'nonce': '1718260171', 'msg_signature': 'ab3136ea7e809e185a73d554c1a855c6a3b0956d', 'timestamp': '1718366693'}>
[INFO][2024-06-14 20:04:53][bridge.py:61] - create bot chatGPT for chat
[ERROR][2024-06-14 20:04:53][chat_channel.py:303] - Worker return exception: unindent does not match any outer indentation level (chat_gpt_bot.py, line 74)
NoneType: None
[INFO][2024-06-14 20:06:37][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:06:37][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:06:43][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:06:43][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:11:16][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:11:16][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:11:16][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:11:16][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:11:16][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:11:16][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:11:17][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:11:17][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为0683。
[INFO][2024-06-14 20:11:17][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:11:17][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:11:17][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:11:17][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:11:17][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:11:17][role.py:69] - [Role] inited
[INFO][2024-06-14 20:11:17][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:11:17][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:11:17][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:11:24][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'timestamp': '1718367084', 'msg_signature': '641a5d3734bd49dfd7da483767775aa67b45fbe4', 'nonce': '1718369953'}>
[INFO][2024-06-14 20:11:24][bridge.py:61] - create bot chatGPT for chat
[ERROR][2024-06-14 20:11:24][chat_channel.py:303] - Worker return exception: inconsistent use of tabs and spaces in indentation (chat_gpt_bot.py, line 79)
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 170, in _handle
    reply = self._generate_reply(context)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 182, in _generate_reply
    e_context = PluginManager().emit_event(
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/plugin_manager.py", line 191, in emit_event
    instance.handlers[e_context.event](e_context, *args, **kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/role/role.py", line 104, in on_handle_context
    bot = Bridge().get_bot("chat")
  File "/usr/cow-qywx/chatgpt-on-wechat/bridge/bridge.py", line 67, in get_bot
    self.bots[typename] = create_bot(self.btype[typename])
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/bot_factory.py", line 23, in create_bot
    from bot.chatgpt.chat_gpt_bot import ChatGPTBot
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/chatgpt/chat_gpt_bot.py", line 79
    if isinstance(reply_content["content"], list):
                                                 ^
TabError: inconsistent use of tabs and spaces in indentation
[INFO][2024-06-14 20:12:25][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:12:25][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:12:26][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:12:26][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:13:21][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:13:21][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:13:21][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:13:21][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:13:21][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:13:21][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:13:21][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为1674。
[INFO][2024-06-14 20:13:21][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:13:21][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:13:21][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:13:21][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:13:22][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:13:22][role.py:69] - [Role] inited
[INFO][2024-06-14 20:13:22][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:13:22][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:13:22][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:13:26][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'f5d7217ade3e88b978f6fad77cf194bf3e86de9a', 'nonce': '1718306092', 'timestamp': '1718367206'}>
[INFO][2024-06-14 20:13:26][bridge.py:61] - create bot chatGPT for chat
[ERROR][2024-06-14 20:13:26][chat_channel.py:303] - Worker return exception: inconsistent use of tabs and spaces in indentation (chat_gpt_bot.py, line 79)
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 170, in _handle
    reply = self._generate_reply(context)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 182, in _generate_reply
    e_context = PluginManager().emit_event(
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/plugin_manager.py", line 191, in emit_event
    instance.handlers[e_context.event](e_context, *args, **kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/plugins/role/role.py", line 104, in on_handle_context
    bot = Bridge().get_bot("chat")
  File "/usr/cow-qywx/chatgpt-on-wechat/bridge/bridge.py", line 67, in get_bot
    self.bots[typename] = create_bot(self.btype[typename])
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/bot_factory.py", line 23, in create_bot
    from bot.chatgpt.chat_gpt_bot import ChatGPTBot
  File "/usr/cow-qywx/chatgpt-on-wechat/bot/chatgpt/chat_gpt_bot.py", line 79
    if isinstance(reply_content["content"], list):
                                                 ^
TabError: inconsistent use of tabs and spaces in indentation
[INFO][2024-06-14 20:13:40][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:13:40][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:13:49][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:13:49][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:14:50][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'https://xiaoyibao.samqin.online/api/v1', 'model': '', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:14:50][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:14:51][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:14:51][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:14:51][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:14:51][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:14:51][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为5789。
[INFO][2024-06-14 20:14:51][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:14:51][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:14:51][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:14:51][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:14:52][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:14:52][role.py:69] - [Role] inited
[INFO][2024-06-14 20:14:52][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:14:52][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:14:52][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:14:58][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '70bed2deb16624eb4bd696d5480c050fc264e121', 'timestamp': '1718367297', 'nonce': '1717769643'}>
[INFO][2024-06-14 20:14:58][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 20:14:58][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[WARNING][2024-06-14 20:14:58][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:14:59][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:15:00][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～你好，我是小胰宝～
[INFO][2024-06-14 20:15:19][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'c969591d2ce06a479aa3a643442579fae3a65fa4', 'timestamp': '1718367319', 'nonce': '1718220214'}>
[INFO][2024-06-14 20:15:19][chat_gpt_bot.py:49] - [CHATGPT] query=今天广州天气
[WARNING][2024-06-14 20:15:19][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:15:36][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[ERROR][2024-06-14 20:15:36][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 20:16:56][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'aeb6646b9251e3dbd2e3bbdbe18929e3666f5c8d', 'timestamp': '1718367416', 'nonce': '1718551955'}>
[INFO][2024-06-14 20:16:56][chat_gpt_bot.py:49] - [CHATGPT] query=广州今天天气
[WARNING][2024-06-14 20:16:56][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:17:04][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:17:04][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～今天广州的天气预报显示，天气状况为大雨转大到暴雨，气温范围在33℃到26℃之间，风力为3-4级。

搜索结果来自：
广州天气预报,广州7天天气预报,广州15天天气预报,广州天气查询 - http://weather.com.cn/weather/101280101.shtml
[INFO][2024-06-14 20:30:13][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:30:13][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:30:14][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:30:14][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:31:32][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:31:32][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:31:32][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:31:32][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:31:32][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:31:32][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:31:33][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:31:33][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为2586。
[INFO][2024-06-14 20:31:33][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:31:33][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:31:33][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:31:33][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:31:33][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:31:33][role.py:69] - [Role] inited
[INFO][2024-06-14 20:31:33][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:31:33][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:31:33][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:31:50][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '071377a20fd2190bd5c931773a1f4f68991d23be', 'timestamp': '1718368310', 'nonce': '1717925775'}>
[INFO][2024-06-14 20:31:50][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 20:31:50][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[WARNING][2024-06-14 20:31:50][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:31:51][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:31:52][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～你好，我是小胰宝～
[INFO][2024-06-14 20:32:08][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': 'f8fa419d5be796c6d8af9a8c2b542e4b222cb340', 'timestamp': '1718368328', 'nonce': '1718421876'}>
[INFO][2024-06-14 20:32:08][chat_gpt_bot.py:49] - [CHATGPT] query=长沙今天天气
[WARNING][2024-06-14 20:32:08][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:32:18][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:32:18][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～长沙今天的天气预报显示，白天有小雨，气温大约在25摄氏度。由于有降水，建议进行室内休闲运动，同时，由于雨水和泥水可能会弄脏车辆，今天不适宜洗车。

搜索结果来自：
长沙天气预报,长沙7天天气预报,长沙15天天气预报,长沙天气查询 - http://weather.com.cn/weather/101250101.shtml
[INFO][2024-06-14 20:32:36][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '91c926522282145eb0846e6dfb90a4dd6fcec17c', 'timestamp': '1718368356', 'nonce': '1718577038'}>
[INFO][2024-06-14 20:32:36][chat_gpt_bot.py:49] - [CHATGPT] query=上海明天天气
[WARNING][2024-06-14 20:32:36][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:32:44][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[ERROR][2024-06-14 20:32:44][chat_channel.py:303] - Worker return exception: can only concatenate str (not "list") to str
Traceback (most recent call last):
  File "/usr/local/python3/lib/python3.8/concurrent/futures/thread.py", line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 176, in _handle
    reply = self._decorate_reply(context, reply)
  File "/usr/cow-qywx/chatgpt-on-wechat/channel/chat_channel.py", line 261, in _decorate_reply
    reply_text = conf().get("single_chat_reply_prefix", "") + reply_text + conf().get("single_chat_reply_suffix", "")
TypeError: can only concatenate str (not "list") to str
[INFO][2024-06-14 20:32:57][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '172303e5ce33e4fc71aa243cc90d47b692d38998', 'timestamp': '1718368377', 'nonce': '1718448203'}>
[INFO][2024-06-14 20:32:57][chat_gpt_bot.py:49] - [CHATGPT] query=鱼香肉丝的菜谱和热量
[WARNING][2024-06-14 20:32:57][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:33:20][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:33:20][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 您好，我是小胰宝，我来帮您查询一下鱼香肉丝的菜谱和热量。

鱼香肉丝是一道非常经典的川菜，主要由猪肉、木耳、笋丝、胡萝卜丝等食材制作而成，调料包括酱油、醋、糖、料酒、姜末、蒜末、辣椒末等。以下是鱼香肉丝的简易做法：

1. 准备食材：猪肉切丝，木耳泡发切丝，笋切丝，胡萝卜切丝，姜蒜切末，辣椒切末。
2. 腌制肉丝：将肉丝用少许盐、料酒、生抽、生粉腌制10分钟。
3. 炒制：锅中加油，先将肉丝炒至变色，盛出备用。
4. 锅中留底油，加入姜蒜末、辣椒末爆香，再加入木耳、笋丝、胡萝卜丝翻炒。
5. 加入肉丝，加入酱油、醋、糖、盐等调料，翻炒均匀，出锅前加入葱花。

关于鱼香肉丝的热量，由于不同食材的热量差异以及烹饪方式的不同，很难给出一个准确的热量值。一般来说，鱼香肉丝的热量在每100克大约在100-150千卡之间。如果您需要精确的热量计算，建议您使用专业的营养分析软件或网站进行计算。

风险提示：[ 本公益项目使用 AI 技术提供信息，可能存在偏差。一切治疗和判断应以主治医生和患者及其家属意见为准。如果您认为信息偏差会影响您的治疗，请勿使用本工具和内容。本项目已事先告知，不承担任何使用风险。]

推荐使用 [小胰腺网页版](https://aibot.samqin.asia) 以获得完整信息。
[INFO][2024-06-14 20:39:55][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:39:55][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:39:56][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-14 20:39:56][config.py:219] - [Config] User datas saved.
[INFO][2024-06-14 20:44:11][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-14 20:44:11][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-14 20:44:11][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-14 20:44:11][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-14 20:44:11][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-14 20:44:11][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-14 20:44:12][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-14 20:44:12][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为8376。
[INFO][2024-06-14 20:44:12][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-14 20:44:12][keyword.py:40] - [keyword] {}
[INFO][2024-06-14 20:44:12][keyword.py:42] - [keyword] inited.
[INFO][2024-06-14 20:44:12][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-14 20:44:12][tool.py:28] - [tool] inited
[INFO][2024-06-14 20:44:12][role.py:69] - [Role] inited
[INFO][2024-06-14 20:44:12][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-14 20:44:12][hello.py:38] - [Hello] inited
[INFO][2024-06-14 20:44:12][finish.py:23] - [Finish] inited
[INFO][2024-06-14 20:44:24][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '01beafa2e5ba8c8814eb851118eb4ce55362f954', 'timestamp': '1718369064', 'nonce': '1718102948'}>
[INFO][2024-06-14 20:44:24][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-14 20:44:24][chat_gpt_bot.py:49] - [CHATGPT] query=上海明天天气
[WARNING][2024-06-14 20:44:24][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:44:33][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:44:33][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～明天（2024年6月15日）上海的天气预报显示，天气将会由多云转为阴天。最高气温预计将达到33摄氏度，最低气温则为24摄氏度。风力级别将小于3级。

搜索结果来自：
上海天气预报,上海7天天气预报,上海15天天气预报,上海天气查询 - http://weather.com.cn/weather/101020100.shtml
[INFO][2024-06-14 20:51:43][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '6934aaf21ecc4d99c5b04331a0b33ff7a94a37d2', 'timestamp': '1718369503', 'nonce': '1718058647'}>
[INFO][2024-06-14 20:51:43][chat_gpt_bot.py:49] - [CHATGPT] query=胰腺癌病人红烧肉能吃吗
[WARNING][2024-06-14 20:51:43][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 20:52:03][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 20:52:04][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 您好，我是小胰宝，胰腺癌患者在饮食上需要特别注意，因为胰腺癌会影响胰腺的分泌功能，导致消化不良和营养吸收障碍。红烧肉属于高脂肪、高热量食物，对于胰腺癌患者来说，摄入这类食物可能会加重胰腺的负担，增加消化不良和营养吸收不良的风险。因此，不建议胰腺癌患者食用红烧肉。

对于胰腺癌患者的饮食，建议选择清淡、细软、易消化的食物，避免油腻、辛辣等刺激性食物。同时，建议患者进行营养咨询，根据个人的营养状况和病情制定合理的饮食计划。

风险提示：[ 本公益项目使用 AI 技术提供信息，可能存在偏差。一切治疗和判断应以主治医生和患者及其家属意见为准。如果您认为信息偏差会影响您的治疗，请勿使用本工具和内容。本项目已事先告知，不承担任何使用风险。]

推荐使用 [小胰腺网页版](https://aibot.samqin.asia) 以获得完整信息。
[INFO][2024-06-14 21:09:11][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '8a6123d6282c4a999de2280ac385b72e93f6c475', 'timestamp': '1718370551', 'nonce': '1718164721'}>
[INFO][2024-06-14 21:09:11][chat_gpt_bot.py:49] - [CHATGPT] query=白斩鸡250g的蛋白质和热量
[WARNING][2024-06-14 21:09:11][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-14 21:09:35][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-14 21:09:35][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 您好，我是小胰宝，关于白斩鸡的蛋白质和热量，由于没有具体的数据来源，我无法提供准确的答案。通常情况下，250g的白斩鸡（以鸡胸肉为例）大约含有25g左右的蛋白质和大约200-300千卡的热量，但这会根据鸡肉的部位、烹饪方式和具体的品牌或来源有所不同。

对于肿瘤患者来说，饮食应该多样化，并且根据个人的营养需求和治疗情况来调整。如果患者有特殊的营养需求或者正在接受特定的治疗，建议咨询营养师或医生以获得个性化的建议。

风险提示：[ 本公益项目使用 AI 技术提供信息，可能存在偏差。一切治疗和判断应以主治医生和患者及其家属意见为准。如果您认为信息偏差会影响您的治疗，请勿使用本工具和内容。本项目已事先告知，不承担任何使用风险。]

推荐使用 [小胰腺网页版](https://aibot.samqin.asia) 以获得完整信息。
[INFO][2024-06-15 07:10:20][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-15 07:10:20][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-15 07:10:21][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-15 07:10:21][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-15 07:10:21][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-15 07:10:21][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-15 07:10:22][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-15 07:10:22][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为1029。
[INFO][2024-06-15 07:10:22][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-15 07:10:22][keyword.py:40] - [keyword] {}
[INFO][2024-06-15 07:10:22][keyword.py:42] - [keyword] inited.
[INFO][2024-06-15 07:10:22][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-15 07:10:23][tool.py:28] - [tool] inited
[INFO][2024-06-15 07:10:23][role.py:69] - [Role] inited
[INFO][2024-06-15 07:10:23][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-15 07:10:23][hello.py:38] - [Hello] inited
[INFO][2024-06-15 07:10:23][finish.py:23] - [Finish] inited
[INFO][2024-06-15 07:11:24][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-15 07:11:24][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-15 07:11:24][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-15 07:11:24][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-15 07:11:24][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-15 07:11:24][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-15 07:11:25][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-15 07:11:25][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为6320。
[INFO][2024-06-15 07:11:25][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-15 07:11:25][keyword.py:40] - [keyword] {}
[INFO][2024-06-15 07:11:25][keyword.py:42] - [keyword] inited.
[INFO][2024-06-15 07:11:25][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-15 07:11:25][tool.py:28] - [tool] inited
[INFO][2024-06-15 07:11:25][role.py:69] - [Role] inited
[INFO][2024-06-15 07:11:25][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-15 07:11:25][hello.py:38] - [Hello] inited
[INFO][2024-06-15 07:11:25][finish.py:23] - [Finish] inited
[INFO][2024-06-15 07:11:35][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'msg_signature': '7586829c0aaca58f8b8b9cff117b883e2d56d284', 'nonce': '1718356094', 'timestamp': '1718406695'}>
[INFO][2024-06-15 07:11:35][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-15 07:11:35][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[WARNING][2024-06-15 07:11:35][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[INFO][2024-06-15 07:18:49][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-15 07:18:49][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-15 07:18:49][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-15 07:18:49][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-15 07:18:49][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-15 07:18:49][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-15 07:18:49][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为3750。
[INFO][2024-06-15 07:18:49][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-15 07:18:49][keyword.py:40] - [keyword] {}
[INFO][2024-06-15 07:18:49][keyword.py:42] - [keyword] inited.
[INFO][2024-06-15 07:18:49][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-15 07:18:50][tool.py:28] - [tool] inited
[INFO][2024-06-15 07:18:50][role.py:69] - [Role] inited
[INFO][2024-06-15 07:18:50][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-15 07:18:50][hello.py:38] - [Hello] inited
[INFO][2024-06-15 07:18:50][finish.py:23] - [Finish] inited
[INFO][2024-06-15 07:18:59][wechatcomapp_channel.py:147] - [wechatcom] receive params: <Storage {'nonce': '1718474162', 'timestamp': '1718407139', 'msg_signature': '83e695eb7440c17e937b466f279bc7cd1dd9427b'}>
[INFO][2024-06-15 07:18:59][bridge.py:61] - create bot chatGPT for chat
[INFO][2024-06-15 07:18:59][chat_gpt_bot.py:49] - [CHATGPT] query=Hi
[WARNING][2024-06-15 07:18:59][session_manager.py:94] - Exception when counting tokens precisely for prompt: name 'get_tokenizer' is not defined
[WARNING][2024-06-15 07:19:01][session_manager.py:106] - Exception when counting tokens precisely for session: name 'get_tokenizer' is not defined
[INFO][2024-06-15 07:19:01][wechatcomapp_channel.py:63] - [wechatcom] Do send text to QinXiaoQiang: [xyb] 
您好，我是小胰宝，我来了～你好，我是小胰宝～
[INFO][2024-06-15 07:47:32][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-15 07:47:32][config.py:219] - [Config] User datas saved.
[INFO][2024-06-15 07:47:34][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-15 07:47:34][config.py:219] - [Config] User datas saved.
[INFO][2024-06-15 07:47:47][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-15 07:47:47][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-15 07:47:48][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-15 07:47:48][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-15 07:47:48][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-15 07:47:48][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-15 07:47:48][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为6458。
[INFO][2024-06-15 07:47:48][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-15 07:47:48][keyword.py:40] - [keyword] {}
[INFO][2024-06-15 07:47:48][keyword.py:42] - [keyword] inited.
[INFO][2024-06-15 07:47:48][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-15 07:47:49][tool.py:28] - [tool] inited
[INFO][2024-06-15 07:47:49][role.py:69] - [Role] inited
[INFO][2024-06-15 07:47:49][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-15 07:47:49][hello.py:38] - [Hello] inited
[INFO][2024-06-15 07:47:49][finish.py:23] - [Finish] inited
[INFO][2024-06-15 07:47:51][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-15 07:47:51][config.py:219] - [Config] User datas saved.
[INFO][2024-06-15 07:47:53][app.py:19] - signal 2 received, exiting...
[INFO][2024-06-15 07:47:53][config.py:219] - [Config] User datas saved.
[INFO][2024-06-15 07:48:18][config.py:260] - [INIT] load config: {'channel_type': 'wechatcom_app', 'single_chat_prefix': [''], 'wechatcom_corp_id': 'ww81a92e0816afd69f', 'wechatcomapp_token': 'cpwtt1yk1saBQf', 'wechatcomapp_secret': 'Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg', 'wechatcomapp_agent_id': '1000004', 'wechatcomapp_aes_key': 'U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU', 'wechatcomapp_port': 9898, 'open_ai_api_key': 'fastgpt-PYewGERC8tKH3duEWY5SJ9qvwV0uXEuoRdgnOX3y4RmOxgNI9Z40pXdedyzdk', 'open_ai_api_base': 'http://111.229.128.119:3100/api/v1', 'model': 'gpt-3.5-turbo', 'text_to_image': 'dall-e-2', 'voice_to_text': 'openai', 'text_to_voice': 'openai', 'proxy': '', 'hot_reload': False, 'single_chat_reply_prefix': '[xyb] ', 'group_chat_prefix': ['@xyb'], 'group_name_white_list': ['ChatGPT测试群', 'ChatGPT测试群2'], 'image_create_prefix': ['画'], 'speech_recognition': False, 'group_speech_recognition': False, 'voice_reply_voice': False, 'conversation_max_tokens': 2500, 'expires_in_seconds': 3600, 'character_desc': '你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。', 'temperature': 0.7, 'subscribe_msg': '感谢您的关注！\n这里是AI智能助手，可以自由对话。\n支持语音对话。\n支持图片输入。\n支持图片输出，画字开头的消息将按要求创作图片。\n支持tool、角色扮演和文字冒险等丰富的插件。\n输入{trigger_prefix}#help 查看详细指令。', 'use_linkai': False, 'linkai_api_key': '', 'linkai_app_code': ''}
[INFO][2024-06-15 07:48:18][config.py:208] - [Config] User datas loaded.
[INFO][2024-06-15 07:48:18][wechatcomapp_channel.py:39] - [wechatcom] init: corp_id: ww81a92e0816afd69f, secret: Ps8I4o6yMcl1koTGcFLmX2bWMka9NLL9Qvx-Lw2eRGg, agent_id: 1000004, token: cpwtt1yk1saBQf, aes_key: U2AXCyrxszOZglFnmQrBYArgWULxbxQRlLNLXxd5tYU
[INFO][2024-06-15 07:48:18][plugin_manager.py:50] - Loading plugins config...
[INFO][2024-06-15 07:48:18][plugin_manager.py:88] - Scaning plugins ...
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Godcmd_v1.0 registered, path=./plugins/godcmd
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin tool_v0.5 registered, path=./plugins/tool
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Hello_v0.1 registered, path=./plugins/hello
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Role_v1.0 registered, path=./plugins/role
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Keyword_v0.1 registered, path=./plugins/keyword
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Finish_v1.0 registered, path=./plugins/finish
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Banwords_v1.0 registered, path=./plugins/banwords
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin Dungeon_v1.0 registered, path=./plugins/dungeon
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin BDunit_v0.1 registered, path=./plugins/bdunit
[INFO][2024-06-15 07:48:18][plugin_manager.py:41] - Plugin linkai_v0.1.0 registered, path=./plugins/linkai
[INFO][2024-06-15 07:48:18][godcmd.py:194] - [Godcmd] 因未设置口令，本次的临时口令为2586。
[INFO][2024-06-15 07:48:18][godcmd.py:210] - [Godcmd] inited
[INFO][2024-06-15 07:48:18][keyword.py:40] - [keyword] {}
[INFO][2024-06-15 07:48:18][keyword.py:42] - [keyword] inited.
[INFO][2024-06-15 07:48:18][linkai.py:34] - [LinkAI] inited, config={'group_app_map': {'测试群名1': 'default', '测试群名2': 'Kv2fXJcH'}, 'midjourney': {'enabled': False, 'auto_translate': True, 'img_proxy': True, 'max_tasks': 3, 'max_tasks_per_user': 1, 'use_image_create_prefix': True}, 'summary': {'enabled': False, 'group_enabled': True, 'max_file_size': 5000, 'type': ['FILE', 'SHARING']}}
[INFO][2024-06-15 07:48:19][tool.py:28] - [tool] inited
[INFO][2024-06-15 07:48:19][role.py:69] - [Role] inited
[INFO][2024-06-15 07:48:19][dungeon.py:56] - [Dungeon] inited
[INFO][2024-06-15 07:48:19][hello.py:38] - [Hello] inited
[INFO][2024-06-15 07:48:19][finish.py:23] - [Finish] inited
